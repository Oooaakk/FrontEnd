{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { InfoFilled } from '@element-plus/icons-vue';\nimport { SwitchButton } from '@element-plus/icons-vue';\nimport { Setting } from '@element-plus/icons-vue';\nimport { Lock } from '@element-plus/icons-vue';\nimport { ref } from 'vue';\nimport { ElMessageBox } from 'element-plus';\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the password'));\n      } else {\n        if (value != '' && (this.ruleForm.pass.length < 8 || this.ruleForm.pass.length > 16)) {\n          console.log(\"密码格式错误\");\n          callback(new Error('Please input correct form of password'));\n        }\n      }\n    };\n\n    var validatePass3 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the password again'));\n      } else if (value !== this.ruleForm.checkPass) {\n        callback(new Error(\"Two inputs don't match!\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      ruleForm: {\n        pass: \"\",\n        password: \"\",\n        confirmPass: \"\"\n      },\n      rules: {\n        pass: [{\n          required: true,\n          validator: validatePass,\n          trigger: \"blur\"\n        }],\n        confirmPass: [{\n          required: true,\n          validator: validatePass3,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n\n  methods: {\n    submitForm() {\n      console.log(\"register!\");\n      request.post(\"/user/register\", {\n        email: this.ruleForm.uname,\n        password: this.ruleForm.pass,\n        verificationCode: this.ruleForm.password,\n        age: this.ruleForm.checkage,\n        gender: this.ruleForm.checkgender,\n        username: this.ruleForm.checkusername\n      }).then(res => {\n        if (res.status === 200) {\n          this.$message({\n            type: \"success\",\n            message: \"successfully registered\"\n          });\n          this.$router.push('/moviehub/loginpage');\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.message\n          });\n        }\n      });\n    },\n\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n\n    goBack() {\n      this.$router.go(-1);\n    },\n\n    handleClose() {\n      ElMessageBox.confirm('Are you sure to close this dialog?').then(() => {\n        done();\n      }).catch(() => {// catch error\n      });\n    },\n\n    handleClose2() {\n      ElMessageBox.confirm('Are you sure to close this dialog?').then(() => {\n        done();\n      }).catch(() => {// catch error\n      });\n    }\n\n  },\n  components: {\n    HubIcon\n  }\n};\nconst dialogVisible = ref(false);\nconst dialogVisibleSetting = ref(false);","map":{"version":3,"mappings":";AAmHE,SAASA,UAAT,QAA2B,yBAA3B;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAASC,IAAT,QAAqB,yBAArB;AACA,SAASC,GAAT,QAAoB,KAApB;AACF,SAASC,YAAT,QAA6B,cAA7B;AACA,eAAe;EACbC,IAAI,GAAG;IACH,IAAIC,YAAW,GAAI,CAACC,IAAD,EAAOC,KAAP,EAAcC,QAAd,KAA2B;MAC5C,IAAID,KAAI,KAAM,EAAd,EAAkB;QAClBC,QAAQ,CAAC,IAAIC,KAAJ,CAAU,2BAAV,CAAD,CAAR;MACF,CAFE,MAEK;QACL,IAAIF,KAAK,IAAE,EAAP,KAAe,KAAKG,QAAL,CAAcC,IAAd,CAAmBC,MAAnB,GAA4B,CAA5B,IAAiC,KAAKF,QAAL,CAAcC,IAAd,CAAmBC,MAAnB,GAA4B,EAA5E,CAAJ,EAAqF;UACnFC,OAAO,CAACC,GAAR,CAAY,QAAZ;UACAN,QAAQ,CAAC,IAAIC,KAAJ,CAAU,uCAAV,CAAD,CAAR;QACF;MAEJ;IACG,CAVD;;IAYA,IAAIM,aAAY,GAAI,CAACT,IAAD,EAAOC,KAAP,EAAcC,QAAd,KAA2B;MAC/C,IAAID,KAAI,KAAM,EAAd,EAAkB;QAChBC,QAAQ,CAAC,IAAIC,KAAJ,CAAU,iCAAV,CAAD,CAAR;MACF,CAFA,MAEO,IAAIF,KAAI,KAAM,KAAKG,QAAL,CAAcM,SAA5B,EAAuC;QAC5CR,QAAQ,CAAC,IAAIC,KAAJ,CAAU,yBAAV,CAAD,CAAR;MACF,CAFO,MAEA;QACLD,QAAQ;MACV;IACC,CARD;;IAUA,OAAO;MAIHE,QAAQ,EAAE;QAENC,IAAI,EAAE,EAFA;QAGNM,QAAQ,EAAE,EAHJ;QAKNC,WAAW,EAAE;MALP,CAJP;MAYHC,KAAK,EAAE;QAEHR,IAAI,EAAE,CAAC;UAAES,QAAQ,EAAE,IAAZ;UAAkBC,SAAS,EAAEhB,YAA7B;UAA2CiB,OAAO,EAAE;QAApD,CAAD,CAFH;QAGHJ,WAAU,EAAI,CAAC;UAACE,QAAQ,EAAE,IAAX;UAAiBC,SAAS,EAAEN,aAA5B;UAA2CO,OAAO,EAAE;QAApD,CAAD;MAHX;IAZJ,CAAP;EAoBH,CA5CY;;EA6CbC,OAAO,EAAE;IACLC,UAAU,GAAG;MACTX,OAAO,CAACC,GAAR,CAAY,WAAZ;MACAW,OAAO,CAACC,IAAR,CAAa,gBAAb,EAA+B;QAACC,KAAK,EAAE,KAAKjB,QAAL,CAAckB,KAAtB;QAA6BX,QAAQ,EAAE,KAAKP,QAAL,CAAcC,IAArD;QAC7BkB,gBAAgB,EAAE,KAAKnB,QAAL,CAAcO,QADH;QACaa,GAAG,EAAE,KAAKpB,QAAL,CAAcqB,QADhC;QAC0CC,MAAM,EAAE,KAAKtB,QAAL,CAAcuB,WADhE;QAE5BC,QAAQ,EAAE,KAAKxB,QAAL,CAAcyB;MAFI,CAA/B,EAE2CC,IAF3C,CAEgDC,GAAE,IAAK;QACnD,IAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;UACpB,KAAKC,QAAL,CAAc;YACdC,IAAI,EAAE,SADQ;YAEdC,OAAO,EAAE;UAFK,CAAd;UAIE,KAAKC,OAAL,CAAaC,IAAb,CAAkB,qBAAlB;QACH,CAND,MAMM;UACN,KAAKJ,QAAL,CAAc;YACZC,IAAI,EAAE,OADM;YAEZC,OAAO,EAAEJ,GAAG,CAACI;UAFD,CAAd;QAIF;MACD,CAfD;IAgBH,CAnBI;;IAoBLG,SAAS,CAACC,QAAD,EAAW;MAChB,KAAKC,KAAL,CAAWD,QAAX,EAAqBE,WAArB;IACH,CAtBI;;IAuBLC,MAAM,GAAG;MACL,KAAKN,OAAL,CAAaO,EAAb,CAAgB,CAAC,CAAjB;IACH,CAzBI;;IA0BLC,WAAW,GAAE;MACf/C,YAAY,CAACgD,OAAb,CAAqB,oCAArB,EACKf,IADL,CACU,MAAM;QACVgB,IAAI;MACL,CAHL,EAIKC,KAJL,CAIW,MAAM,CACX;MACD,CANL;IAOE,CAlCK;;IAoCPC,YAAW,GAAI;MACXnD,YAAY,CAACgD,OAAb,CAAqB,oCAArB,EACCf,IADD,CACM,MAAM;QACVgB,IAAI;MACL,CAHD,EAICC,KAJD,CAIO,MAAM,CACX;MACD,CAND;IAOJ;;EA5CO,CA7CI;EA4FbE,UAAU,EAAE;IAAEC;EAAF;AA5FC,CAAf;AA+FA,MAAMC,aAAY,GAAIvD,GAAG,CAAC,KAAD,CAAzB;AACA,MAAMwD,oBAAmB,GAAIxD,GAAG,CAAC,KAAD,CAAhC","names":["InfoFilled","SwitchButton","Setting","Lock","ref","ElMessageBox","data","validatePass","rule","value","callback","Error","ruleForm","pass","length","console","log","validatePass3","checkPass","password","confirmPass","rules","required","validator","trigger","methods","submitForm","request","post","email","uname","verificationCode","age","checkage","gender","checkgender","username","checkusername","then","res","status","$message","type","message","$router","push","resetForm","formName","$refs","resetFields","goBack","go","handleClose","confirm","done","catch","handleClose2","components","HubIcon","dialogVisible","dialogVisibleSetting"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\components\\AvatarIcon.vue"],"sourcesContent":["<template>\r\n  <el-popover\r\n    :width=\"200\"\r\n    trigger=\"hover\"\r\n    content=\"\"\r\n    \r\n  >\r\n  <el-button text @click=\"dialogVisible = true\" class=\"cpass\"\r\n    ><el-icon><Lock/></el-icon>change password</el-button\r\n  >\r\n    <el-button @click=\"dialogVisibleSetting  = true\" class=\"setting\">\r\n      <el-icon class=\"setting\"><Setting /></el-icon>SettingPage</el-button>\r\n    <el-popconfirm\r\n    confirm-button-text=\"Yes\"\r\n    cancel-button-text=\"No\"\r\n    :icon=\"InfoFilled\"\r\n    icon-color=\"#626AEF\"\r\n    title=\"Are you sure to log out?\"\r\n    @confirm=\"$router.push('/moviehub/loginpage')\"\r\n  >\r\n    <template #reference>\r\n      <el-button class=\"logoutbutton\"><el-icon class=\"Sbutton\"><SwitchButton /></el-icon>logout</el-button>\r\n    </template>\r\n  </el-popconfirm>\r\n  \r\n    <template #reference>\r\n      <div class=\"avatar\" >\r\n        <el-avatar \r\n        src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"\r\n        @click=\"$router.push('/moviehub/dashboard/1234')\"\r\n          /><!--头像-->\r\n    </div>\r\n    </template>\r\n  </el-popover>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"Change Password\"\r\n    width=\"30%\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n  <el-form\r\n        :model=\"ruleForm\"\r\n        status-icon\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-position=\"left\"\r\n        label-width=\"150px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item class= \"color1\" label=\"Email\" prop=\"uname\">\r\n          <el-input v-model=\"ruleForm.uname\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"Username\" prop=\"checkusername\">\r\n      <el-input class = \"inputform\" v-model=\"ruleForm.checkusername\" maxlength=16 placeholder=\"Jack\" />\r\n    </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"Gender\" prop=\"checkgender\">\r\n      <el-select v-model=\"ruleForm.checkgender\" class=\"m-2\" placeholder=\"Select\" size=\"large\">\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\"\r\n      />\r\n      </el-select>\r\n    \r\n    </el-form-item>\r\n    <el-form-item class = \"color1\" label=\"Age\" prop=\"checkage\">\r\n      <el-input-number v-model=\"ruleForm.checkage\" :min=\"1\" :max=\"120\" @change=\"handleChange\" />\r\n    </el-form-item>\r\n        <el-form-item class= \"color1\" label=\"Password\" prop=\"pass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"ruleForm.pass\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"confirm password\" prop=\"confirmPass\">\r\n        <el-input  class = \"inputform\" v-model=\"ruleForm.confirmPass\" type=\"Password\" autocomplete=\"off\"/>\r\n      </el-form-item>\r\n        <el-form-item class= \"color1\" label=\"Verification code\" prop=\"password\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"ruleForm.password\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n          >Confirm</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n  <el-dialog\r\n    v-model=\"dialogVisibleSetting\"\r\n    title=\"Change Settings\"\r\n    width=\"30%\"\r\n    :before-close=\"handleClose2\"\r\n  >\r\n    <span>This is a message</span>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n          >Confirm</el-button\r\n        >\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n  \r\n</template>\r\n<script>\r\n  import { InfoFilled } from '@element-plus/icons-vue'\r\n  import { SwitchButton } from '@element-plus/icons-vue'\r\n  import { Setting } from '@element-plus/icons-vue'\r\n  import { Lock } from '@element-plus/icons-vue'\r\n  import { ref } from 'vue'\r\nimport { ElMessageBox } from 'element-plus'\r\nexport default {\r\n  data() {\r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n        callback(new Error('Please input the password'))\r\n      } else {\r\n        if (value!='' && ((this.ruleForm.pass.length < 8 || this.ruleForm.pass.length > 16))){\r\n          console.log(\"密码格式错误\")\r\n          callback(new Error('Please input correct form of password'))\r\n        }\r\n        \r\n    }\r\n      };\r\n      \r\n      var validatePass3 = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('Please input the password again'))\r\n      } else if (value !== this.ruleForm.checkPass) {\r\n        callback(new Error(\"Two inputs don't match!\"))\r\n      } else {\r\n        callback()\r\n      }\r\n      };\r\n     \r\n      return {\r\n       \r\n    \r\n          \r\n          ruleForm: {\r\n\r\n              pass: \"\",\r\n              password: \"\",\r\n\r\n              confirmPass: \"\",\r\n\r\n          },\r\n          rules: {\r\n\r\n              pass: [{ required: true, validator: validatePass, trigger: \"blur\" }],\r\n              confirmPass : [{required: true, validator: validatePass3, trigger: \"blur\"}],\r\n        \r\n             \r\n          },\r\n      };\r\n  },\r\n  methods: {\r\n      submitForm() {\r\n          console.log(\"register!\");\r\n          request.post(\"/user/register\", {email: this.ruleForm.uname, password: this.ruleForm.pass, \r\n            verificationCode: this.ruleForm.password, age: this.ruleForm.checkage, gender: this.ruleForm.checkgender,\r\n             username: this.ruleForm.checkusername}).then(res => {\r\n              if(res.status === 200){\r\n                this.$message({\r\n                type: \"success\",\r\n                message: \"successfully registered\"\r\n                })\r\n                  this.$router.push('/moviehub/loginpage');\r\n              }else {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: res.message\r\n              })\r\n            }\r\n          })\r\n      },\r\n      resetForm(formName) {\r\n          this.$refs[formName].resetFields();\r\n      },\r\n      goBack() {\r\n          this.$router.go(-1);\r\n      },\r\n      handleClose(){\r\n    ElMessageBox.confirm('Are you sure to close this dialog?')\r\n        .then(() => {\r\n          done()\r\n        })\r\n        .catch(() => {\r\n          // catch error\r\n        })\r\n     },\r\n  \r\n    handleClose2 (){\r\n        ElMessageBox.confirm('Are you sure to close this dialog?')\r\n        .then(() => {\r\n          done()\r\n        })\r\n        .catch(() => {\r\n          // catch error\r\n        })\r\n    }   \r\n\r\n  },\r\n  components: { HubIcon }\r\n  \r\n};\r\nconst dialogVisible = ref(false)\r\nconst dialogVisibleSetting = ref(false)\r\n\r\n\r\n  </script>\r\n<style>\r\n  .avatar{\r\n  position:fixed;\r\n  top:10px;\r\n  left:1210px\r\n}\r\n.avatar:hover{\r\n  cursor:pointer;\r\n\r\n}\r\n.setting{\r\n    margin-top:10px\r\n}\r\n.cpass{\r\n    margin-left:11.5px\r\n}\r\n.lock{\r\n  margin-right:5px;\r\n}\r\n.setting{\r\n  margin-right:5px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.plus{\r\n  margin-right:5px;\r\n}\r\n.Sbutton{\r\n  margin-right: 5px;;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}