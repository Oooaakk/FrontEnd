{"ast":null,"code":"import { ref } from 'vue';\nimport HubIcon from '@/components/HubIcon.vue';\nimport AvatarIcon from '../components/AvatarIcon.vue';\nimport request2 from \"@/utils/Request2.js\";\nimport request from '@/utils/RequestFile';\nexport default {\n  data() {\n    return {\n      components: {\n        HubIcon\n      },\n      rules: {\n        imdbmovietitle: [{\n          required: true,\n          message: \"choose title!!\",\n          trigger: \"blur\"\n        }],\n        textarea: [{\n          required: true,\n          message: \"review cannot be blank\",\n          trigger: \"blur\"\n        }],\n        rating: [{\n          required: true,\n          message: \"rating cannot be blank\",\n          trigger: \"blur\"\n        }]\n      },\n      form: {\n        imdbmovietitle: \"\",\n        textarea: \"\",\n        rating: \"\",\n        moviename: \"\"\n      },\n      dialogVisible: false,\n      movies: [],\n      options: []\n    };\n  },\n\n  // mounted(){\n  //   this.searchTitle();\n  // },\n  methods: {\n    selectBlur(e) {\n      // 意见类型\n      if (e.target.value !== '') {\n        this.value = e.target.value + '(其他)';\n        this.$forceUpdate(); // 强制更新\n      }\n    },\n\n    selectClear() {\n      this.value = '';\n      this.$forceUpdate();\n    },\n\n    selectChange(val) {\n      this.value = val;\n      this.$forceUpdate();\n    },\n\n    back() {\n      this.dialogVisible = false;\n      this.options.length = 0;\n    },\n\n    searchTitle() {\n      request2.get(\"/?title=\" + this.form.imdbmovietitle).then(res => {\n        if (res.status === 200) {\n          this.dialogVisible = true;\n\n          for (let i = 0; i < res.data.results.length; i++) {\n            console.log(\"search movie\");\n            this.options.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    },\n\n    save() {\n      request.post(\"/post\", this.form).then(res => {\n        console.log(res);\n\n        if (res.stutas === 200) {\n          this.$message({\n            //返回id movie card的\n            type: \"success\",\n            message: \"successfully post the movie\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n    }\n\n  },\n  components: {\n    HubIcon\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","HubIcon","AvatarIcon","request2","request","data","components","rules","imdbmovietitle","required","message","trigger","textarea","rating","form","moviename","dialogVisible","movies","options","methods","selectBlur","e","target","value","$forceUpdate","selectClear","selectChange","val","back","length","searchTitle","get","then","res","status","i","results","console","log","push","title","label","$message","type","save","post","stutas","msg"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\PostPage.vue"],"sourcesContent":["\r\n<template>\r\n\r\n  <div class=\"common-layout\">\r\n      <el-container>\r\n        <el-header class=\"header\" >\r\n          <AvatarIcon/>\r\n        </el-header>\r\n        <el-main class=\"main\">\r\n\r\n        <div class=\"posthere\">  Post here </div>  \r\n        </el-main>\r\n        <el-form\r\n        :model=\"form\"\r\n        status-icon\r\n        :rules=\"rules\"\r\n        ref=\"Form\"\r\n        label-position=\"left\"\r\n        label-width=\"100px\"\r\n        class=\"login-from\"\r\n        hide-required-aterisk=\"true\">\r\n        \r\n        <el-form-item label = \"Movie title: \" class=\"movietitle\">\r\n          <el-input\r\n          v-model=\"form.imdbmovietitle\" class=\"select\" placeholder=\"search movie title\" @change=\"searchTitle()\">\r\n   \r\n          </el-input>\r\n        </el-form-item >\r\n       \r\n        <el-form-item label = \"Review: \" class=\"labelcolor\">\r\n        <el-input\r\n        v-model=\"form.textarea\"\r\n        :rows=\"3\"\r\n         type=\"textarea\"\r\n        placeholder=\"Please input movie review\"\r\n        class=\"textinput\"\r\n        \r\n        />\r\n      </el-form-item>\r\n      <el-form-item class = \"rating\" label=\"Rating\" prop=\"rating\">\r\n      <el-input-number v-model=\"form.rating\" :min=\"0\" :max=\"5\" @change=\"handleChange\" />\r\n    </el-form-item>\r\n  \r\n    </el-form>\r\n    <el-button type=\"warning\" round class=\"LRbutton\" @click=\"$router.push('/moviehub/dashboard/1234');save()\">Save</el-button> \r\n  </el-container>\r\n  <el-select \r\n\t\t\tv-model=\"value\"\r\n            placeholder=\"请选择\"\r\n            clearable\r\n            filterable\r\n            @blur=\"selectBlur\"\r\n            @clear=\"selectClear\"\r\n            @change=\"selectChange\"\r\n            >\r\n                  <el-option\r\n                    v-for=\"(item,index) in options\"\r\n                    :key=\"index\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\" />\r\n</el-select>\r\n\r\n    </div>\r\n    \r\n   <HubIcon/>\r\n  </template>\r\n\r\n\r\n  <script>\r\nimport { ref } from 'vue'\r\nimport HubIcon from '@/components/HubIcon.vue';\r\nimport AvatarIcon from '../components/AvatarIcon.vue';\r\nimport request2 from \"@/utils/Request2.js\";\r\nimport request from '@/utils/RequestFile';\r\nexport default {\r\n  data() {\r\n    return {\r\n      components: {\r\n              HubIcon\r\n          },\r\n      rules: {\r\n        imdbmovietitle: [\r\n                    { required: true, message: \"choose title!!\", trigger: \"blur\" },\r\n        ],\r\n        textarea: [\r\n              { required: true, message: \"review cannot be blank\", trigger: \"blur\" },\r\n        ],\r\n        rating: [\r\n              { required: true, message: \"rating cannot be blank\", trigger: \"blur\" },\r\n        ],\r\n\r\n      },\r\n      form: {\r\n        imdbmovietitle: \"\",\r\n        textarea: \"\",\r\n        rating:\"\",\r\n        moviename: \"\"\r\n     \r\n      },\r\n      dialogVisible: false,\r\n      movies: [],\r\n      options: []\r\n    }\r\n  },\r\n  // mounted(){\r\n  //   this.searchTitle();\r\n  // },\r\n  methods:{\r\n    selectBlur(e) {\r\n        // 意见类型\r\n        if (e.target.value !== '') {\r\n          this.value = e.target.value + '(其他)';\r\n          this.$forceUpdate()   // 强制更新\r\n        }\r\n      },\r\n      selectClear() {\r\n        this.value = ''\r\n        this.$forceUpdate()\r\n      },\r\n      selectChange(val) {\r\n        this.value = val\r\n        this.$forceUpdate()\r\n      },\r\n\r\n    back() {\r\n      this.dialogVisible = false;\r\n      this.options.length = 0;\r\n    },\r\n    searchTitle () {\r\n      request2.get(\"/?title=\" + this.form.imdbmovietitle).then(res => {\r\n        if(res.status === 200){\r\n          this.dialogVisible = true;\r\n          \r\n          for(let i =0; i<res.data.results.length; i++) {\r\n            console.log(\"search movie\");\r\n            this.options.push({\r\n              value:res.data.results[i].title,\r\n              label:res.data.results[i].title\r\n            })\r\n          }\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"unsucessfully search\"\r\n          })\r\n        }\r\n\r\n      })\r\n    },\r\n    save(){\r\n      request.post(\"/post\", this.form).then(res => {\r\n          console.log(res)\r\n          if (res.stutas===200) {\r\n            this.$message({\r\n              //返回id movie card的\r\n              type: \"success\",\r\n              message: \"successfully post the movie\"\r\n            })\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n    }\r\n  },\r\n  \r\n  components: { HubIcon }\r\n}\r\n</script>\r\n\r\n<style>\r\n  body {\r\nbackground-color: #222231;\r\n}\r\n.header{\r\n  background-color: black;\r\n\r\n}\r\n\r\n.LRbutton{\r\n  width:10%;\r\n  margin-top:25px;\r\n  margin-left:530px;\r\n}\r\n.main{\r\n  background-color: white;\r\n  height:64px;\r\n  \r\n}\r\n\r\n.posthere{\r\n  position: absolute;\r\n  font-weight: bold;\r\n  font-size: x-large;\r\n}\r\n.movietitle{\r\n   margin-top:50px;\r\n   margin-left:330px;\r\n\r\n}\r\n.select{\r\n  width:50%\r\n}\r\n.labelcolor{\r\n   margin-top:50px;\r\n   margin-left:330px;\r\n\r\n}\r\n.textinput{\r\n  margin-right:170px;\r\n  width:50%;\r\n \r\n}\r\n.star{\r\n  margin-left:24px;\r\n}\r\n\r\n.movietitle .el-form-item__label {\r\n  color: orange\r\n}\r\n.genre{\r\n  margin-top:50px;\r\n   margin-left:330px;\r\n}\r\n.genre .el-form-item__label {\r\n  color: orange\r\n}\r\n.poster{\r\n  margin-top:50px;\r\n   margin-left:330px;\r\n}\r\n.poster .el-form-item__label {\r\n  color: orange\r\n}\r\n.rating .el-form-item__label {\r\n  color: orange\r\n}\r\n.rating{\r\n  margin-left:330px;\r\n  margin-top:50px;\r\n}\r\n\r\n.labelcolor .el-form-item__label {\r\n  color: orange\r\n}\r\n.movietitleinput{\r\n  width:50%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}