{"ast":null,"code":"export default {\n  data() {\n    return {\n      //存储数据的对象\n      rulesForm: {\n        email: '',\n        password: ''\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '名字',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 5,\n          message: '长度在3到5',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 5,\n          message: '长度在3到5',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          //如果校检通过，在这里向后端发送用户名和密码\n          register({\n            name: this.rulesForm.name,\n            password: this.rulesForm.password\n          }).then(data => {\n            console.log(data);\n\n            if (data.code === 0) {\n              localStorage.setItem('token', data.data.token);\n              window.location.href = '/';\n            }\n\n            if (data.code === 1) {\n              this.$message.error(data.mes);\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4CA,eAAe;EACbA,IAAI,GAAG;IACJ,OAAO;MACN;MACAC,SAAS,EAAC;QACRC,KAAK,EAAC,EADE;QAERC,QAAQ,EAAC;MAFD,CAFJ;MAMNC,KAAK,EAAC;QACJC,IAAI,EAAC,CACH;UAACC,QAAQ,EAAC,IAAV;UAAeC,OAAO,EAAC,IAAvB;UAA4BC,OAAO,EAAC;QAApC,CADG,EAEH;UAACC,GAAG,EAAC,CAAL;UAAOC,GAAG,EAAC,CAAX;UAAaH,OAAO,EAAC,QAArB;UAA8BC,OAAO,EAAC;QAAtC,CAFG,CADD;QAKJL,QAAQ,EAAC,CACP;UAACG,QAAQ,EAAC,IAAV;UAAeC,OAAO,EAAC,IAAvB;UAA4BC,OAAO,EAAC;QAApC,CADO,EAEP;UAACC,GAAG,EAAC,CAAL;UAAOC,GAAG,EAAC,CAAX;UAAaH,OAAO,EAAC,QAArB;UAA8BC,OAAO,EAAC;QAAtC,CAFO;MALL;IANA,CAAP;EAiBF,CAnBY;;EAoBbG,OAAO,EAAE;IACXC,UAAU,CAACC,QAAD,EAAU;MACd,KAAKC,KAAL,CAAWD,QAAX,EAAqBE,QAArB,CAAgCC,KAAD,IAAU;QACvC,IAAGA,KAAH,EAAS;UACP;UACAC,QAAQ,CAAC;YACPZ,IAAI,EAAC,KAAKJ,SAAL,CAAeI,IADb;YAEPF,QAAQ,EAAC,KAAKF,SAAL,CAAeE;UAFjB,CAAD,CAAR,CAGGe,IAHH,CAGSlB,IAAD,IAAU;YAChBmB,OAAO,CAACC,GAAR,CAAYpB,IAAZ;;YACA,IAAGA,IAAI,CAACqB,IAAL,KAAc,CAAjB,EAAoB;cAClBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BvB,IAAI,CAACA,IAAL,CAAUwB,KAAvC;cACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;YACF;;YACA,IAAG3B,IAAI,CAACqB,IAAL,KAAc,CAAjB,EAAoB;cAClB,KAAKO,QAAL,CAAcC,KAAd,CAAoB7B,IAAI,CAAC8B,GAAzB;YACF;UACD,CAZD;QAaD,CAfD,MAeK;UACHX,OAAO,CAACC,GAAR,CAAY,gBAAZ;UACA,OAAO,KAAP;QACF;MACD,CApBD;IAqBF;;EAvBO;AApBI,CAAf","names":["data","rulesForm","email","password","rules","name","required","message","trigger","min","max","methods","submitForm","formName","$refs","validate","valid","register","then","console","log","code","localStorage","setItem","token","window","location","href","$message","error","mes"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\LoginPage.vue"],"sourcesContent":["<template>\r\n  \r\n  <el-form\r\n    ref=\"ruleFormRef\"\r\n    :model=\"ruleForm\"\r\n    status-icon\r\n    :rules=\"rules\"\r\n    label-width=\"210px\"\r\n    class=\"demo-ruleForm\"\r\n    :cell-style=\"{ 'text-align': 'center'}\"\r\n  >\r\n  <el-card class=\"box-card\">\r\n      <h2 class=\"h2\">Login Form</h2>\r\n    <el-form-item class = \"languagecolour\" label=\"Email\" prop=\"pass\">\r\n      <el-input class = \"inputform\" v-model=\"ruleForm.pass\" type=\"email\" autocomplete=\"off\"/>\r\n    </el-form-item>\r\n    <el-form-item class = \"languagecolour\" label=\"Password\" prop=\"checkPass\">\r\n      <el-input\r\n        class = \"inputform\"\r\n        v-model=\"ruleForm.checkPass\"\r\n        type=\"password\"\r\n        autocomplete=\"off\"\r\n      />\r\n      \r\n    </el-form-item>\r\n    <a href=\"http://localhost:8080/#/moviehub/forgetpassword\" class=\"forgetpass\">Forget password? Click here</a>\r\n    <el-form-item class=\"loginresetbutton\">\r\n      <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\"\r\n        >Log in</el-button\r\n      >\r\n      <el-link href=\"http://localhost:8080/#/moviehub/registerpage\">\r\n      <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\" class=\"registerlink\"\r\n        >No account?register here</el-button\r\n      >\r\n    </el-link>\r\n      <el-button @click=\"resetForm(ruleFormRef)\" class=\"resetbutton\">Reset</el-button>\r\n    </el-form-item>\r\n  </el-card>\r\n  </el-form>\r\n  \r\n  <HubIcon/>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n     return {\r\n      //存储数据的对象\r\n      rulesForm:{\r\n        email:'',\r\n        password:''\r\n      },\r\n      rules:{\r\n        name:[\r\n          {required:true,message:'名字',trigger:'blur'},\r\n          {min:1,max:5,message:'长度在3到5',trigger:'blur'}\r\n        ],\r\n        password:[\r\n          {required:true,message:'密码',trigger:'blur'},\r\n          {min:3,max:5,message:'长度在3到5',trigger:'blur'}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\nsubmitForm(formName){\r\n      this.$refs[formName].validate( (valid) =>{\r\n        if(valid){\r\n          //如果校检通过，在这里向后端发送用户名和密码\r\n          register({\r\n            name:this.rulesForm.name,\r\n            password:this.rulesForm.password\r\n          }).then((data) => {\r\n            console.log(data)\r\n            if(data.code === 0 ){\r\n              localStorage.setItem('token',data.data.token)\r\n              window.location.href = '/';\r\n            }\r\n            if(data.code === 1 ){\r\n              this.$message.error(data.mes)\r\n            }\r\n          })\r\n        }else{\r\n          console.log('error submit!!');\r\n          return false\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style >\r\n.languagecolour .el-form-item__label {\r\n  color: #FF9900;\r\n  \r\n}\r\n.loginresetbutton{\r\n  margin-left:-70px;\r\n  margin-top:20px;\r\n  text-decoration:none;\r\n}\r\n.registerlink{\r\n\r\n  margin-left:10px;\r\n  text-decoration:none;\r\n  \r\n}\r\n.resetbutton{\r\n\r\nmargin-left:10px;\r\n\r\n}\r\n.forgetpass{\r\n  color:#FF9900;\r\n  text-decoration:none;\r\n  margin-left:200px;\r\n  margin-top:20px\r\n}\r\n.inputform {\r\n  width: 50%;\r\n}\r\n.demo-ruleForm {\r\n text-align:left; border-radius: 8px;margin: 0 auto;width:50%;\r\n  position:fixed;top:220px;left:325px;font-weight: bold;\r\n}\r\n\r\nbody {\r\nbackground-image:url('https://wallpapercave.com/dwp2x/wp11089675.jpg');\r\n}\r\n.box-card {\r\n  margin-top:-100px;\r\n\r\n  color:orange\r\n}\r\n.login-from {\r\n  margin: auto auto;\r\n  \r\n}\r\n.h2{\r\n  margin-left:230px;\r\n}\r\n  </style>"]},"metadata":{},"sourceType":"module"}