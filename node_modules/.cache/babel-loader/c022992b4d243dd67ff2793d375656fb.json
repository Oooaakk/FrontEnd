{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"forgotpwd\"\n};\nconst _hoisted_2 = {\n  class: \"form_title\"\n};\nconst _hoisted_3 = {\n  class: \"manage_title\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"forgot_title\"\n}, [/*#__PURE__*/_createElementVNode(\"h3\", null, \"forget password\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  class: \"vertify\"\n};\nconst _hoisted_6 = {\n  class: \"forgot_button\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"submit\");\n\nconst _hoisted_8 = {\n  class: \"tip_area\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"go to login\");\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"p\", null, \"If there is no verification code,check spam email \", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_HubIcon = _resolveComponent(\"HubIcon\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"section\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" 主要修改 :model rules ref v-model prop 添加 placeholder 与 html 代码无异\"), _createVNode(_component_el_form, {\n    model: $data.forgotPass,\n    rules: $data.rules,\n    ref: \"forgotPassForm\",\n    \"label-width\": \"80px\",\n    class: \"registerForm\",\n    \"hide-required-asterisk\": \"\"\n  }, {\n    default: _withCtx(() => [_hoisted_4, _createVNode(_component_el_form_item, {\n      label: \"email\",\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"email\",\n        modelValue: $data.forgotPass.email,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.forgotPass.email = $event),\n        \"prefix-icon\": \"el-icon-message\",\n        placeholder: \"type in email\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      label: \"password\",\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: $data.pwdType,\n        modelValue: $data.forgotPass.password,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.forgotPass.password = $event),\n        \"prefix-icon\": \"el-icon-lock\",\n        placeholder: \"type in password\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"i\", {\n          title: \"show or hide password\",\n          class: _normalizeClass($options.showPwd),\n          style: {\n            color: '#409eff',\n            cursor: 'pointer'\n          },\n          onClick: _cache[1] || (_cache[1] = (...args) => $options.togglePwd && $options.togglePwd(...args))\n        }, null, 2\n        /* CLASS */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"type\", \"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      label: \"confirm password\",\n      prop: \"password2\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: $data.pwdType,\n        modelValue: $data.forgotPass.password2,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.forgotPass.password2 = $event),\n        \"prefix-icon\": \"el-icon-lock\",\n        placeholder: \"confirm password\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"i\", {\n          title: \"show or hide password\",\n          class: _normalizeClass($options.showPwd),\n          style: {\n            color: '#409eff',\n            cursor: 'pointer'\n          },\n          onClick: _cache[3] || (_cache[3] = (...args) => $options.togglePwd && $options.togglePwd(...args))\n        }, null, 2\n        /* CLASS */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"type\", \"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      label: \"verification code\",\n      prop: \"verificationCode\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_input, {\n        \"prefix-icon\": \"el-icon-key\",\n        modelValue: $data.forgotPass.verificationCode,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.forgotPass.verificationCode = $event),\n        placeholder: \"verification code\",\n        \"auto-complete\": \"off\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        plain: \"\",\n        onClick: _cache[6] || (_cache[6] = $event => $options.getCode('forgotPassForm')),\n        disabled: $data.isDisabled,\n        class: \"emailcode\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.btnMsg), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"disabled\"])])]),\n      _: 1\n      /* STABLE */\n\n    }), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: _cache[7] || (_cache[7] = $event => $options.forgetPass('forgotPassForm')),\n      class: \"confirm\"\n    }, {\n      default: _withCtx(() => [_hoisted_7]),\n      _: 1\n      /* STABLE */\n\n    })]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_router_link, {\n      to: \"/moviehub/loginpage\"\n    }, {\n      default: _withCtx(() => [_hoisted_9]),\n      _: 1\n      /* STABLE */\n\n    }), _hoisted_10])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"])])])]), _createVNode(_component_HubIcon)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createCommentVNode","_createVNode","_component_el_form","model","$data","rules","ref","_hoisted_4","_component_el_form_item","label","prop","_component_el_input","type","email","$event","placeholder","password","title","$options","style","color","cursor","onClick","password2","verificationCode","_component_el_button","plain","disabled","_component_router_link","to","_hoisted_10","_component_HubIcon"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\ForgetPassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"forgotpwd\">\r\n    <section class=\"form_title\">\r\n      <div class=\"manage_title\">\r\n        <!-- 主要修改 :model rules ref v-model prop 添加 placeholder 与 html 代码无异-->\r\n        <el-form\r\n          :model=\"forgotPass\"\r\n          :rules=\"rules\"\r\n          ref=\"forgotPassForm\"\r\n          label-width=\"80px\"\r\n          class=\"registerForm\"\r\n          hide-required-asterisk\r\n          \r\n        >\r\n          <div class=\"forgot_title\">\r\n            <h3>forget password</h3>\r\n          </div>\r\n          <el-form-item label=\"email\" prop=\"email\">\r\n            <el-input\r\n              type=\"email\"\r\n              v-model=\"forgotPass.email\"\r\n              prefix-icon=\"el-icon-message\"\r\n              placeholder=\"type in email\"\r\n            >\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"password\" prop=\"password\">\r\n            <el-input\r\n              :type=\"pwdType\"\r\n              v-model=\"forgotPass.password\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              placeholder=\"type in password\"\r\n            >\r\n              <i\r\n        \r\n                title=\"show or hide password\"\r\n                :class=\"showPwd\"\r\n                :style=\"{ color: '#409eff', cursor: 'pointer' }\"\r\n                @click=\"togglePwd\"\r\n              >\r\n              </i>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"confirm password\" prop=\"password2\">\r\n            <el-input\r\n              :type=\"pwdType\"\r\n              v-model=\"forgotPass.password2\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              placeholder=\"confirm password\"\r\n            >\r\n              <i\r\n     \r\n                title=\"show or hide password\"\r\n                :class=\"showPwd\"\r\n                :style=\"{ color: '#409eff', cursor: 'pointer' }\"\r\n                @click=\"togglePwd\"\r\n              >\r\n              </i>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"verification code\" prop=\"verificationCode\">\r\n            <div class=\"vertify\">\r\n              <el-input\r\n                prefix-icon=\"el-icon-key\"\r\n                v-model=\"forgotPass.verificationCode\"\r\n                placeholder=\"verification code\"\r\n                auto-complete=\"off\"\r\n              ></el-input>\r\n              <el-button\r\n                type=\"primary\"\r\n                plain\r\n                @click=\"getCode('forgotPassForm')\"\r\n                :disabled=\"isDisabled\"\r\n                class=\"emailcode\"\r\n              >\r\n                {{ btnMsg }}\r\n              </el-button>\r\n            </div>\r\n          </el-form-item>\r\n          <div class=\"forgot_button\">\r\n            <el-button type=\"primary\" @click=\"forgetPass('forgotPassForm')\" class=\"confirm\"\r\n              >submit</el-button\r\n            >\r\n          </div>\r\n          <div class=\"tip_area\">\r\n            <router-link to=\"/moviehub/loginpage\">go to login</router-link>\r\n            <p>If there is no verification code,check spam email </p>\r\n          </div>\r\n        </el-form>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <HubIcon/>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/RequestFile.js\"\r\nimport HubIcon from \"@/components/HubIcon.vue\"\r\nexport default {\r\n    name: \"ForgotPassword\",\r\n    data() {\r\n        const validatePass2 = (rule, value, callback) => {\r\n            if (value !== this.forgotPass.password) {\r\n                callback(new Error(\"password and confirm password are not the same!!!\"));\r\n            }\r\n            else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            pwdType: \"password\",\r\n            isShowPwd: false,\r\n            btnMsg: \"get code\",\r\n            isDisabled: false,\r\n            time: 30,\r\n            forgotPass: {\r\n                email: \"\",\r\n                password: \"\",\r\n                // password2: \"\",\r\n                verificationCode: \"\",\r\n            },\r\n            rules: {\r\n                email: [\r\n                    { required: true, message: \"email cannot be blank\", trigger: \"blur\" },\r\n                    { type: \"email\", message: \"input correct email\", trigger: \"change\" },\r\n                ],\r\n                password: [\r\n                    { required: true, message: \"password cannot be blank\", trigger: \"blur\" },\r\n                    {\r\n                        min: 5,\r\n                        max: 16,\r\n                        message: \"length of password should be >5, <16\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                password2: [\r\n                    { required: true, message: \"confirm password cannot be blank\", trigger: \"blur\" },\r\n                    {\r\n                        min: 5,\r\n                        max: 16,\r\n                        message: \"length of confirm password should be >5, <16\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                    { validator: validatePass2, trigger: \"blur\" },\r\n                ],\r\n            },\r\n        };\r\n    },\r\n    computed: {\r\n        showPwd() {\r\n            return this.isShowPwd ? \"third-icon-alieye\" : \"third-icon-alino_eye\";\r\n        },\r\n    },\r\n    methods: {\r\n        togglePwd() {\r\n            this.pwdType === \"password\"\r\n                ? (this.pwdType = \"\")\r\n                : (this.pwdType = \"password\");\r\n            this.isShowPwd = !this.isShowPwd;\r\n        },\r\n        // 验证码发送\r\n        getCode(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    request\r\n                        .post(\"/user/forgotPassword/email\", {\r\n                            email: this.forgotPass.email,\r\n                 \r\n                    })\r\n                        .then((res) => {\r\n                        // console.log(res)\r\n                        if (res.status === 200) {\r\n                            this.$message({\r\n                                message: \"email is sent\",\r\n                                type: \"success\",\r\n                            });\r\n                            this.isDisabled = true;\r\n                            let interval = setInterval(() => {\r\n                                this.btnMsg = \"\" + this.time + \"seconds\";\r\n                                --this.time;\r\n                                if (this.time < 0) {\r\n                                    this.btnMsg = \"get email verification code\";\r\n                                    this.time = 30;\r\n                                    this.isDisabled = false;\r\n                                    clearInterval(interval);\r\n                                }\r\n                            }, 1000);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        // 修改密码\r\n        forgetPass(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    request\r\n                        .post(\"/user/forgotPassword\", this.forgotPass)\r\n                        .then((res) => {\r\n                        // console.log(res)\r\n                        if (res.data.success) {\r\n                            this.$message({\r\n                                message: res.data.message,\r\n                                type: \"success\",\r\n                            });\r\n                            setTimeout(() => {\r\n                                history.pushState({}, \"\", \"/moviehub/loginpage\"); //跳转到登录界面\r\n                                location.reload();\r\n                            }, 1000);\r\n                        }\r\n                        else {\r\n                            this.$message({\r\n                                message: res.data.message,\r\n                                type: \"error\",\r\n                            });\r\n                        }\r\n                    })\r\n                        .catch((err) => {\r\n                        this.$message({\r\n                            message: \"system error!\",\r\n                            type: \"error\",\r\n                        });\r\n                        console.log(\"Error\", err);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n    },\r\n    components: { HubIcon }\r\n}\r\n</script>\r\n\r\n<style>\r\n   body {\r\nbackground-image:url('https://wallpapercave.com/dwp2x/wp11089675.jpg');\r\n\r\n}\r\n.forgotpwd {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  background-size: 100% 100%;\r\n}\r\n.form_title {\r\n  width: 370px;\r\n  height: 210px;\r\n  position: absolute;\r\n  top: 5%;\r\n  left: 34%;\r\n  padding: 25px;\r\n  border-radius: 5px;\r\n  text-align: center;\r\n}\r\n.form_title .manage_title .title {\r\n  font-family: 'Microsoft YaHei';\r\n  font-weight: bold;\r\n  font-size: 26px;\r\n  color: #111;\r\n}\r\n.forgot_title {\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  color: #505458;\r\n}\r\n.registerForm {\r\n  margin-top: 20px;\r\n  background-color: #fff;\r\n  padding: 20px 40px 20px 20px;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 5px 10px #cccc;\r\n}\r\n.vertify {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.vertify >>> .emailcode {\r\n  margin-left: 10px;\r\n  font-size: 10px;\r\n}\r\n.forgot_button {\r\n  padding-left: 80px;\r\n}\r\n.confirm {\r\n  width: 100%;\r\n}\r\n.tip_area {\r\n  text-align: left;\r\n  font-size: 12px;\r\n  color: #333;\r\n  margin-top: 20px;\r\n}\r\n.tip_area a {\r\n  color: #409eff;\r\n}\r\n.tip_area p {\r\n  margin-top: 15px;\r\n  color: gray;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}