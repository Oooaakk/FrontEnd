{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport HubIcon from '@/components/HubIcon.vue';\nimport AvatarIcon from '@/components/AvatarIcon.vue';\nimport request2 from \"@/utils/Request2.js\";\nexport default {\n  data() {\n    return {\n      keywords: \"\",\n      input1: '',\n      value3: '',\n      value2: '',\n      options: [{\n        value: 'Drama',\n        label: 'Drama'\n      }, {\n        value: 'Comedy',\n        label: 'Comedy'\n      }, {\n        value: 'Horror',\n        label: 'Horror'\n      }, {\n        value: 'Thriller',\n        label: 'Thriller'\n      }, {\n        value: 'Action',\n        label: 'Action'\n      }, {\n        value: 'Sci-Fi',\n        label: 'Sci-Fi'\n      }, {\n        value: 'Crime',\n        label: 'Crime'\n      }, {\n        value: 'Adventure',\n        label: 'Adventure'\n      }, {\n        value: 'Other',\n        label: 'Other'\n      }],\n      optionsSort: [{\n        label: 'A-Z Ascending',\n        value: 'alpha,asc'\n      }, {\n        label: 'A-Z Descending',\n        value: 'alpha,desc'\n      }, {\n        label: 'User Rating Ascending',\n        value: 'user_rating,asc'\n      }, {\n        label: 'User Rating Descending',\n        value: 'user_rating,desc'\n      }, {\n        label: 'Year Descending',\n        value: 'year,desc'\n      }, {\n        label: 'Year Ascending',\n        value: 'year,asc'\n      }, {\n        label: 'Popularity Ascending',\n        value: 'moviemeter,asc'\n      }, {\n        label: 'Popularity Descending',\n        value: 'moviemeter,desc'\n      }],\n      movietitle: [],\n      movieposter: [],\n      moviegenre: [],\n      movieofficialrating: [],\n      movieid: [],\n      itemlist: [],\n      //postlist:[],\n      movielist: [],\n      movieplot: [],\n      inputText: \"\",\n      poster: \"\",\n      rating: \"\",\n      title: \"\",\n      routeuserID: JSON.parse(localStorage.getItem('userid'))\n    };\n  },\n\n  mounted() {\n    this.getTopmovies();\n  },\n\n  methods: {\n    searchrelmovie() {\n      this.clearall();\n      console.log(this.movietitle);\n      var outcome;\n\n      if (this.value2 !== '' && this.value3 === '') {\n        this.getTopmovies();\n      } else if (this.value2 === '' && this.value3 !== '') {\n        outcome = request2.get(\"/?genres=\" + this.value3);\n      } else if (this.value2 === '' && this.value3 === '') {\n        this.getTopmovies();\n      } else if (this.value2 !== '' && this.value3 !== '') {\n        outcome = request2.get(\"/?genres=\" + this.value3 + '&sort=' + this.value2);\n      }\n\n      outcome.then(res => {\n        if (res.status === 200) {\n          // let i=0;\n          // while(i<res.data.results.length)\n          for (let i = 0; i < res.data.results.length; i++) {\n            this.movietitle.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n            this.movieofficialrating.push({\n              value: res.data.results[i].imDbRating,\n              label: res.data.results[i].imDbRating\n            });\n            this.movieposter.push({\n              value: res.data.results[i].image,\n              label: res.data.results[i].image\n            });\n            this.movieid.push({\n              value: res.data.results[i].id,\n              label: res.data.results[i].id\n            });\n            this.movieplot.push({\n              value: res.data.results[i].plot,\n              label: res.data.results[i].plot\n            });\n            this.moviegenre.push({\n              value: res.data.results[i].genres,\n              label: res.data.results[i].genres\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    },\n\n    clearall() {\n      this.movietitle = [];\n      this.movieid = [];\n      this.movieplot = [];\n      this.moviegenre = [];\n      this.movieofficialrating = [];\n      this.movieposter = [];\n    },\n\n    // 查询\n    querySearchAsync(queryString, cb) {\n      // data 为可选列表数据\n      let data_list = [];\n\n      if (queryString.length > 0) {\n        request2.get(\"/?title=\" + queryString).then(res => {\n          if (res.status === 200) {\n            for (let i = 0; i < res.data.results.length; i++) {\n              this.movielist.push({\n                title: res.data.results[i].title,\n                image: res.data.results[i].image,\n                rating: res.data.results[i].imDbRating,\n                plot: res.data.results[i].plot,\n                genres: res.data.results[i].genres\n              });\n              data_list.push({\n                value: res.data.results[i].title,\n                title: res.data.results[i].title\n              }); //this.postlist.push(res.data.results[i].image);\n            }\n\n            cb(data_list);\n          } else {\n            this.$message({\n              type: \"error\",\n              message: \"unsucessfully search\"\n            });\n          }\n        });\n      } else {\n        cb(data_list);\n      }\n    },\n\n    // 选择下拉\n    handleSelect(item) {\n      console.log(item);\n\n      for (let i = 0; i < this.movielist.length; i++) {\n        if (item.value === this.movielist[i].title) {\n          this.$router.push({\n            path: '/Moviehub/contentpageuser/' + this.movielist[i].title,\n            query: {\n              poster: this.movielist[i].image,\n              rating: this.movielist[i].rating,\n              title: this.movielist[i].title,\n              plot: this.movielist[i].plot,\n              genres: this.movielist[i].genres\n            }\n          });\n        }\n      }\n    },\n\n    reset() {\n      this.inputText = \"\";\n    },\n\n    jumptoContent(index) {\n      this.$router.push({\n        path: '/Moviehub/contentpageuser/' + this.movieid[index].value,\n        query: {\n          poster: this.movieposter[index].value,\n          rating: this.movieofficialrating[index].value,\n          title: this.movietitle[index].value,\n          plot: this.movieplot[index].value,\n          genres: this.moviegenre[index].value\n        }\n      });\n    },\n\n    getInputValue(searchvalue) {\n      console.log(searchvalue);\n      /*if(this.last !== searchvalue){\r\n        this.itemlist.length = 0;\r\n      }*/\n\n      request2.get(\"/?title=\" + searchvalue).then(res => {\n        if (res.status === 200) {\n          this.itemlist.length = 0;\n\n          for (let i = 0; i < res.data.results.length; i++) {\n            this.movielist.push({\n              title: res.data.results[i].title,\n              image: res.data.results[i].image,\n              rating: res.data.results[i].imDbRating\n            });\n            this.itemlist.push(res.data.results[i].title); //this.postlist.push(res.data.results[i].image);\n          }\n\n          console.log(res.data.results.length);\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      }); // 请求获取筛选列表\n    },\n\n    getTopmovies() {\n      request2.get(\"/?groups=top_250\").then(res => {\n        if (res.status === 200) {\n          for (let i = 0; i < res.data.results.length; i++) {\n            console.log(\"search movie\");\n            this.movietitle.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n            this.movieofficialrating.push({\n              value: res.data.results[i].imDbRating,\n              label: res.data.results[i].imDbRating\n            });\n            this.movieposter.push({\n              value: res.data.results[i].image,\n              label: res.data.results[i].image\n            });\n            this.movieid.push({\n              value: res.data.results[i].id,\n              label: res.data.results[i].id\n            });\n            this.movieplot.push({\n              value: res.data.results[i].plot,\n              label: res.data.results[i].plot\n            });\n            this.moviegenre.push({\n              value: res.data.results[i].genres,\n              label: res.data.results[i].genres\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    }\n\n  },\n  components: {\n    HubIcon,\n    AvatarIcon\n  }\n};","map":{"version":3,"mappings":"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","names":["HubIcon","AvatarIcon","request2","data","keywords","input1","value3","value2","options","value","label","optionsSort","movietitle","movieposter","moviegenre","movieofficialrating","movieid","itemlist","movielist","movieplot","inputText","poster","rating","title","routeuserID","JSON","parse","localStorage","getItem","mounted","getTopmovies","methods","searchrelmovie","clearall","console","log","outcome","get","then","res","status","i","results","length","push","imDbRating","image","id","plot","genres","$message","type","message","querySearchAsync","queryString","cb","data_list","handleSelect","item","$router","path","query","reset","jumptoContent","index","getInputValue","searchvalue","components"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\MainPageUser.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header class=\"header\">\r\n        <div class=\"seaerchthreegroup\">\r\n          <!--<el-input class= \"searchbar\" placeholder=\"search your movie\" v-model=\"inputText\"></el-input>-->\r\n  \r\n            <el-autocomplete \r\n              placeholder=\"search your movie\" \r\n              popper-class=\"my-autocomplete\" \r\n              class=\"input-with-select\" \r\n              v-model=\"keywords\" \r\n              :fetch-suggestions=\"querySearchAsync\" \r\n              :trigger-on-focus=\"false\" \r\n              @select=\"handleSelect\">\r\n            </el-autocomplete>\r\n  \r\n        <!-- <div>\r\n          <el-button type=\"primary\" class=\"searchbut\"  >Search</el-button>\r\n        </div>\r\n        <div>\r\n          <el-button class=\"newbutton\" @click=\"reset()\">Reset</el-button>\r\n        </div> -->\r\n      </div>\r\n  \r\n      <div v-if=\"routeuserID===''|| routeuserID===null\">\r\n       <el-button type=\"warning\" round class=\"LRbutton\" @click=\"$router.push('/moviehub/loginpage')\">Login/Register</el-button> \r\n      </div>\r\n      <div v-else>\r\n        <AvatarIcon :routeID=\"routeuserID\"/>\r\n      </div>\r\n  \r\n      </el-header>\r\n      \r\n      <el-main class=\"main\">\r\n        <div class=\"recommend\">Recommend movies</div>\r\n        <div class=\"filteroptiongroup\">\r\n        <el-select v-model=\"value2\" class=\"select\" placeholder=\"sortBy\">\r\n    <el-option\r\n      v-for=\"item in optionsSort\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\"\r\n      \r\n    />\r\n  </el-select>\r\n  \r\n  <el-select v-model=\"value3\" class=\"select\" placeholder=\"filter\">\r\n    <el-option\r\n      v-for=\"item in options\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\"\r\n      \r\n    />\r\n  </el-select>\r\n  \r\n  <el-button @click=\"searchrelmovie()\">recommended</el-button></div>\r\n        <el-divider />\r\n        <!--movie card-->\r\n\r\n        <el-space wrap>\r\n          \r\n            <el-card v-for=\"(item,i) in movietitle\" :key=\"i\" class=\"box-card\" style=\"width: 250px;margin-right:20px\"\r\n             @click=\"jumptoContent(i)\">\r\n\r\n                <div class=\"card-header\">\r\n                  <span>{{movietitle[i].value}}({{moviegenre[i].value}})</span>\r\n                  <el-divider/>\r\n  \r\n                  <span><el-image :src=\"movieposter[i].value\"></el-image></span>\r\n                  <el-divider/>\r\n                  <span>imdb rating:{{movieofficialrating[i].value}}</span>\r\n                </div>\r\n            </el-card>\r\n          \r\n        </el-space>\r\n\r\n        <el-backtop :bottom=\"100\">\r\n          <div\r\n            style=\"\r\n              height: 100%;\r\n              width: 100%;\r\n              background-color: var(--el-bg-color-overlay);\r\n              box-shadow: var(--el-box-shadow-lighter);\r\n              text-align: center;\r\n              line-height: 40px;\r\n              color: #1989fa;\r\n            \"\r\n          >\r\n            UP\r\n          </div>\r\n        </el-backtop>\r\n      </el-main>\r\n      \r\n    </el-container>\r\n    \r\n  </div>\r\n  \r\n  <HubIcon/>\r\n  </template>\r\n  \r\n  <script>\r\n  import HubIcon from '@/components/HubIcon.vue';\r\n  import AvatarIcon from '@/components/AvatarIcon.vue';\r\n  import request2 from \"@/utils/Request2.js\";\r\n  \r\n  export default{\r\n      data(){\r\n          return{\r\n            keywords: \"\",\r\n            input1:'',\r\n            value3:'',\r\n            value2:'',\r\n            options : [\r\n            {\r\n              value: 'Drama',\r\n              label: 'Drama',\r\n            },\r\n            {\r\n              value: 'Comedy',\r\n              label: 'Comedy',\r\n            },\r\n            {\r\n              value: 'Horror',\r\n              label: 'Horror',\r\n            },\r\n            {\r\n              value: 'Thriller',\r\n              label: 'Thriller',\r\n            },\r\n            {\r\n              value: 'Action',\r\n              label: 'Action',\r\n            },\r\n            {\r\n              value: 'Sci-Fi',\r\n              label: 'Sci-Fi',\r\n            },\r\n            {\r\n              value: 'Crime',\r\n              label: 'Crime',\r\n            },\r\n            {\r\n              value: 'Adventure',\r\n              label: 'Adventure',\r\n            },\r\n          \r\n            {\r\n              value: 'Other',\r\n              label: 'Other',\r\n            }\r\n            ],\r\n            optionsSort: [\r\n            {\r\n              label: 'A-Z Ascending',\r\n              value: 'alpha,asc',\r\n            },\r\n            {\r\n              label: 'A-Z Descending',\r\n              value: 'alpha,desc',\r\n            },\r\n            {\r\n              label: 'User Rating Ascending',\r\n              value: 'user_rating,asc',\r\n            },\r\n            {\r\n              label: 'User Rating Descending',\r\n              value: 'user_rating,desc',\r\n            },\r\n            {\r\n              label: 'Year Descending',\r\n              value: 'year,desc',\r\n            },\r\n            {\r\n              label: 'Year Ascending',\r\n              value: 'year,asc',\r\n            },\r\n            {\r\n              label: 'Popularity Ascending',\r\n              value: 'moviemeter,asc',\r\n            },\r\n            {\r\n              label: 'Popularity Descending',\r\n              value: 'moviemeter,desc',\r\n            },\r\n            \r\n            ],\r\n            movietitle:[],\r\n            movieposter:[],\r\n            moviegenre:[],\r\n            movieofficialrating:[],\r\n            movieid:[],\r\n  \r\n            itemlist: [],\r\n            //postlist:[],\r\n            movielist : [],\r\n            movieplot:[],\r\n            inputText: \"\",\r\n            \r\n            poster: \"\",\r\n            rating: \"\",\r\n            title: \"\",\r\n            routeuserID:JSON.parse(localStorage.getItem('userid'))\r\n          }\r\n        },\r\n        mounted(){\r\n          this.getTopmovies()\r\n        },\r\n        methods:{\r\n          searchrelmovie(){\r\n            this.clearall();\r\n            console.log(this.movietitle);\r\n            var outcome;\r\n            if (this.value2!=='' && this.value3===''){\r\n              this.getTopmovies()\r\n            }else if(this.value2==='' && this.value3!==''){\r\n              outcome=request2.get(\"/?genres=\"+this.value3)\r\n            }else if(this.value2==='' && this.value3===''){\r\n              this.getTopmovies()\r\n            }else if(this.value2!=='' && this.value3!==''){\r\n              outcome=request2.get(\"/?genres=\"+this.value3+'&sort='+this.value2)\r\n            }\r\n              outcome.then(res=>{\r\n              if(res.status === 200){\r\n                  // let i=0;\r\n                  // while(i<res.data.results.length)\r\n                  for(let i =0; i<res.data.results.length; i++) {\r\n                    this.movietitle.push({\r\n                      value:res.data.results[i].title,\r\n                      label:res.data.results[i].title\r\n                    })\r\n                    this.movieofficialrating.push({\r\n                      value:res.data.results[i].imDbRating,\r\n                      label:res.data.results[i].imDbRating\r\n                    })\r\n                    this.movieposter.push({\r\n                      value:res.data.results[i].image,\r\n                      label:res.data.results[i].image\r\n                    })\r\n                    this.movieid.push({\r\n                      value:res.data.results[i].id,\r\n                      label:res.data.results[i].id\r\n                    })\r\n                    this.movieplot.push({\r\n                      value:res.data.results[i].plot,\r\n                      label:res.data.results[i].plot\r\n                    })\r\n                    this.moviegenre.push({\r\n                      value:res.data.results[i].genres,\r\n                      label:res.data.results[i].genres\r\n                    })\r\n                  }\r\n                }else {\r\n                    this.$message({\r\n                      type: \"error\",\r\n                      message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n          \r\n          \r\n          },\r\n          clearall(){\r\n             this.movietitle=[];\r\n             this.movieid=[];\r\n             this.movieplot=[];\r\n             this.moviegenre=[];\r\n             this.movieofficialrating=[];\r\n             this.movieposter=[];\r\n          },\r\n  \r\n  // 查询\r\n          querySearchAsync (queryString, cb) {\r\n            // data 为可选列表数据\r\n            let data_list = []\r\n            \r\n            if (queryString.length > 0) {\r\n              request2.get(\"/?title=\" + queryString).then(res => {\r\n              if(res.status === 200){\r\n                \r\n                for(let i =0; i<res.data.results.length; i++) {\r\n                  this.movielist.push({\r\n                    title: res.data.results[i].title,\r\n                    image: res.data.results[i].image,\r\n                    rating: res.data.results[i].imDbRating,\r\n                    plot: res.data.results[i].plot,\r\n                    genres: res.data.results[i].genres\r\n  \r\n                  });\r\n                  data_list.push({value:res.data.results[i].title,\r\n                                  title:res.data.results[i].title});\r\n                  //this.postlist.push(res.data.results[i].image);\r\n                }\r\n                cb(data_list);\r\n                \r\n              }else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })          \r\n            } else {\r\n              cb(data_list)\r\n            }\r\n          },\r\n          // 选择下拉\r\n          handleSelect (item) {\r\n            console.log(item)\r\n            for(let i = 0; i<this.movielist.length; i++){\r\n              if(item.value === this.movielist[i].title){\r\n                this.$router.push({path: '/Moviehub/contentpageuser/' + this.movielist[i].title, query: {\r\n                  poster: this.movielist[i].image, rating: this.movielist[i].rating, title: this.movielist[i].title, plot: this.movielist[i].plot, genres: this.movielist[i].genres}});\r\n                \r\n              }\r\n            }\r\n  \r\n          },\r\n          reset() {\r\n            this.inputText = \"\"\r\n          },\r\n          jumptoContent(index) {\r\n            this.$router.push({path: '/Moviehub/contentpageuser/' + this.movieid[index].value, query: {\r\n              poster: this.movieposter[index].value,rating: this.movieofficialrating[index].value,title: \r\n              this.movietitle[index].value, plot:this.movieplot[index].value,genres:this.moviegenre[index].value\r\n              }\r\n            });\r\n        \r\n          },\r\n          getInputValue(searchvalue) {\r\n            console.log(searchvalue);\r\n            \r\n            /*if(this.last !== searchvalue){\r\n              this.itemlist.length = 0;\r\n            }*/\r\n            \r\n            request2.get(\"/?title=\" + searchvalue).then(res => {\r\n              if(res.status === 200){\r\n                this.itemlist.length = 0;\r\n                for(let i =0; i<res.data.results.length; i++) {\r\n                  this.movielist.push({\r\n                    title: res.data.results[i].title,\r\n                    image: res.data.results[i].image,\r\n                    rating: res.data.results[i].imDbRating\r\n                  });\r\n                  this.itemlist.push(res.data.results[i].title);\r\n                  //this.postlist.push(res.data.results[i].image);\r\n                }\r\n                console.log(res.data.results.length);\r\n                \r\n              }else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n            // 请求获取筛选列表\r\n            \r\n          },\r\n          getTopmovies(){\r\n            request2.get(\"/?groups=top_250\").then(res=>{\r\n                if(res.status === 200){\r\n              \r\n                    for(let i =0; i<res.data.results.length; i++) {\r\n                      console.log(\"search movie\");\r\n                      this.movietitle.push({\r\n                        value:res.data.results[i].title,\r\n                        label:res.data.results[i].title\r\n                      })\r\n                      this.movieofficialrating.push({\r\n                        value:res.data.results[i].imDbRating,\r\n                        label:res.data.results[i].imDbRating\r\n                      })\r\n                      this.movieposter.push({\r\n                        value:res.data.results[i].image,\r\n                        label:res.data.results[i].image\r\n                      })\r\n                      this.movieid.push({\r\n                        value:res.data.results[i].id,\r\n                        label:res.data.results[i].id\r\n                      })\r\n                      this.movieplot.push({\r\n                        value:res.data.results[i].plot,\r\n                        label:res.data.results[i].plot\r\n                      })\r\n                      this.moviegenre.push({\r\n                        value:res.data.results[i].genres,\r\n                        label:res.data.results[i].genres\r\n                      })\r\n                    }\r\n                  }else {\r\n                    this.$message({\r\n                      type: \"error\",\r\n                      message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n          }\r\n        },\r\n        \r\n        components: { HubIcon,AvatarIcon},\r\n      };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  \r\n  .header{\r\n  background-color: black;\r\n    \r\n  }\r\n  .searchbar{\r\n    margin-left: 100px;\r\n    width:20%;\r\n    margin-top: 17px;\r\n  }\r\n  .searchbut{\r\n    padding-left:20px;\r\n    margin-left:500px;\r\n    margin-top: -50px;\r\n  }\r\n  .LRbutton{\r\n  position:relative;\r\n  left:580px;\r\n  }\r\n  \r\n  .search{\r\n  width:45%;\r\n  margin-top: 15px;\r\n  }\r\n  .select{\r\n  margin-left:10px;\r\n  width:10%;\r\n  right:200px;\r\n  }\r\n  .LRbutton{\r\n  position:relative;\r\n  left:560px;\r\n  top:-20px\r\n  }\r\n  .setting{\r\n  margin-top:10px\r\n  }\r\n  .recommend{\r\n  position:absolute;\r\n  font-size:x-large;\r\n  font-weight:bold;\r\n  color:orange\r\n  }\r\n  .avatar{\r\n  position:relative;\r\n  top:-36.5px;\r\n  right:-600px;\r\n  }\r\n  .main{\r\n    background-color: rgb(55, 55, 60);\r\n  }\r\n  \r\n  .newwbutton{\r\n    margin-top:15px;\r\n    margin-left:400px;\r\n    \r\n  }\r\n  .newbutton{\r\n      margin-left: 700px;\r\n      margin-top: -85px;\r\n    }\r\n  .box-card{\r\n    cursor:pointer;\r\n  }\r\n  .filteroptiongroup{\r\n    position:relative;\r\n    left:70px;\r\n  }\r\n  .seaerchthreegroup{\r\n  \r\n    position:relative;\r\n    top:13px;\r\n    left:0px;\r\n  \r\n  }\r\n  </style>"]},"metadata":{},"sourceType":"module"}