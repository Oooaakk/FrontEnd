{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"{ {sendcode}}\");\n\nconst _hoisted_2 = {\n  slot: \"footer\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"取消\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"提交\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_col = _resolveComponent(\"el-col\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_row = _resolveComponent(\"el-row\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createBlock(_component_el_dialog, {\n    title: \"忘记密码\",\n    visible: $props.centerDialogVisibleSecond,\n    width: \"30%\",\n    \"before-close\": $options.handleClose\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      \"label-width\": \"120px\",\n      ref: \"forgetpwdform\",\n      model: $data.forgetpwdform,\n      rules: $data.rules\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_row, {\n        gutter: 20\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 14\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            prop: \"phone\",\n            label: \"手机号：\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $data.forgetpwdform.phone,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.forgetpwdform.phone = $event),\n              maxlength: \"11\"\n            }, null, 8\n            /* PROPS */\n            , [\"modelValue\"])]),\n            _: 1\n            /* STABLE */\n\n          })]),\n          _: 1\n          /* STABLE */\n\n        }), _createVNode(_component_el_col, {\n          span: 10\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_button, {\n            onClick: $options.sendcodeMsg,\n            disabled: $data.disabled\n          }, {\n            default: _withCtx(() => [_hoisted_1]),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"onClick\", \"disabled\"])]),\n          _: 1\n          /* STABLE */\n\n        })]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_row, null, {\n        default: _withCtx(() => [_createVNode(_component_el_col, null, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            prop: \"code\",\n            label: \"验证码：\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $data.forgetpwdform.code,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.forgetpwdform.code = $event)\n            }, null, 8\n            /* PROPS */\n            , [\"modelValue\"])]),\n            _: 1\n            /* STABLE */\n\n          })]),\n          _: 1\n          /* STABLE */\n\n        })]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"newpassword\",\n        label: \"新密码\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"password\",\n          modelValue: $data.forgetpwdform.newpassword,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.forgetpwdform.newpassword = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"repeatpassword\",\n        label: \"确认密码\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"password\",\n          modelValue: $data.forgetpwdform.repeatpassword,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.forgetpwdform.repeatpassword = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"model\", \"rules\"]), _createElementVNode(\"template\", _hoisted_2, [_createVNode(_component_el_button, {\n      type: \"default\",\n      onClick: $options.handleClose\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.handleSubmit\n    }, {\n      default: _withCtx(() => [_hoisted_4]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"])])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"visible\", \"before-close\"]);\n}","map":{"version":3,"mappings":";;iDAcuE;;;EAmBvDA,IAAI,EAAC;;;iDACoC;;iDACC;;;;;;;;;;;;;;;;;uBAlCxDC,aAoCYC,oBApCZ,EAoCY;IApCDC,KAAK,EAAC,MAoCL;IAnCAC,OAAO,EAAOC,gCAmCd;IAlCDC,KAAK,EAAC,KAkCL;IAjCA,gBAAcC;EAiCd,CApCZ;sBAKI,MA0BU,CA1BVC,aA0BUC,kBA1BV,EA0BU;MA1BD,eAAY,OA0BX;MA1BmBC,GAAG,EAAC,eA0BvB;MA1BwCC,KAAK,EAAEC,mBA0B/C;MA1B+DC,KAAK,EAAED;IA0BtE,CA1BV;wBACI,MAUS,CAVTJ,aAUSM,iBAVT,EAUS;QAVAC,MAAM,EAAE;MAUR,CAVT,EAAmB;0BACf,MAIS,CAJTP,aAISQ,iBAJT,EAIS;UAJAC,IAAI,EAAE;QAIN,CAJT,EAAiB;4BACb,MAEe,CAFfT,aAEeU,uBAFf,EAEe;YAFDC,IAAI,EAAC,OAEJ;YAFYC,KAAK,EAAC;UAElB,CAFf;8BACI,MAAkE,CAAlEZ,aAAkEa,mBAAlE,EAAkE;0BAA/CT,oBAAcU,KAAiC;yEAA/CV,oBAAcU,QAAKC,OAA4B;cAA1BC,SAAS,EAAC;YAAgB,CAAlE;;YAAA,iBAAkE;;;;WADtE,CAEe,EAHF;;;;QAAA,CAAjB,CAIS,EACThB,aAGSQ,iBAHT,EAGS;UAHAC,IAAI,EAAE;QAGN,CAHT,EAAiB;4BACb,MACM,CADNT,aACMiB,oBADN,EACM;YADMC,OAAK,EAAEnB,oBACb;YAD2BoB,QAAQ,EAAEf;UACrC,CADN;8BAAqD,MAC3D;;;;WADM;;UAAA,0BACM,EAFO;;;;QAAA,CAAjB,CADS,EALM;;;;MAAA,CAAnB,CAUS,EACTJ,aAMSM,iBANT,EAMS,IANT,EAMS;0BALL,MAIS,CAJTN,aAISQ,iBAJT,EAIS,IAJT,EAIS;4BAHL,MAEe,CAFfR,aAEeU,uBAFf,EAEe;YAFDC,IAAI,EAAC,MAEJ;YAFWC,KAAK,EAAC;UAEjB,CAFf;8BACI,MAAkD,CAAlDZ,aAAkDa,mBAAlD,EAAkD;0BAA/BT,oBAAcgB,IAAiB;yEAA/BhB,oBAAcgB,OAAIL;YAAa,CAAlD;;YAAA,iBAAkD;;;;WADtD,CAEe,EACV;;;;QAAA,CAJT,CAIS,EACJ;;;;MAAA,CANT,CADS,EAQTf,aAEeU,uBAFf,EAEe;QAFDC,IAAI,EAAC,aAEJ;QAFkBC,KAAK,EAAC;MAExB,CAFf;0BACI,MAAyE,CAAzEZ,aAAyEa,mBAAzE,EAAyE;UAA/DQ,IAAI,EAAC,UAA0D;sBAAtCjB,oBAAckB,WAAwB;qEAAtClB,oBAAckB,cAAWP;QAAa,CAAzE;;QAAA,iBAAyE;;;;OAD7E,CARS,EAWTf,aAEeU,uBAFf,EAEe;QAFDC,IAAI,EAAC,gBAEJ;QAFqBC,KAAK,EAAC;MAE3B,CAFf;0BACI,MAA4E,CAA5EZ,aAA4Ea,mBAA5E,EAA4E;UAAlEQ,IAAI,EAAC,UAA6D;sBAAzCjB,oBAAcmB,cAA2B;qEAAzCnB,oBAAcmB,iBAAcR;QAAa,CAA5E;;QAAA,iBAA4E;;;;OADhF,CAXS;;;;KAXb;;IAAA,qBA0BU,EACVS,oBAGW,UAHX,cAGW,CAFPxB,aAA6DiB,oBAA7D,EAA6D;MAAlDI,IAAI,EAAC,SAA6C;MAAlCH,OAAK,EAAEnB;IAA2B,CAA7D;wBAA+C,MAAE;;;;KAAjD;;IAAA,cAEO,EADPC,aAA8DiB,oBAA9D,EAA8D;MAAnDI,IAAI,EAAC,SAA8C;MAAnCH,OAAK,EAAEnB;IAA4B,CAA9D;wBAAgD,MAAE;;;;KAAlD;;IAAA,cACO,CAHX,CADU;;;;GA/Bd;;EAAA","names":["slot","_createBlock","_component_el_dialog","title","visible","$props","width","$options","_createVNode","_component_el_form","ref","model","$data","rules","_component_el_row","gutter","_component_el_col","span","_component_el_form_item","prop","label","_component_el_input","phone","$event","maxlength","_component_el_button","onClick","disabled","code","type","newpassword","repeatpassword","_createElementVNode"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\ForgetPassword.vue"],"sourcesContent":["<template>\r\n  <el-dialog title=\"忘记密码\"\r\n             :visible.sync=\"centerDialogVisibleSecond\"\r\n             width=\"30%\"\r\n             :before-close=\"handleClose\"\r\n  >\r\n      <el-form label-width=\"120px\" ref=\"forgetpwdform\" :model=\"forgetpwdform\" :rules=\"rules\">\r\n          <el-row :gutter=\"20\">\r\n              <el-col :span=\"14\">\r\n                  <el-form-item prop=\"phone\" label=\"手机号：\">\r\n                      <el-input v-model=\"forgetpwdform.phone\" maxlength=\"11\"></el-input>\r\n                  </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"10\">\r\n                  <el-button @click=\"sendcodeMsg\" :disabled=\"disabled\">{\r\n {sendcode}}</el-button>\r\n              </el-col>\r\n          </el-row>\r\n          <el-row>\r\n              <el-col>\r\n                  <el-form-item prop=\"code\" label=\"验证码：\">\r\n                      <el-input v-model=\"forgetpwdform.code\"></el-input>\r\n                  </el-form-item>\r\n              </el-col>\r\n          </el-row>\r\n          <el-form-item prop=\"newpassword\" label=\"新密码\">\r\n              <el-input type=\"password\" v-model=\"forgetpwdform.newpassword\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"repeatpassword\" label=\"确认密码\">\r\n              <el-input type=\"password\" v-model=\"forgetpwdform.repeatpassword\"></el-input>\r\n          </el-form-item>\r\n\r\n      </el-form>\r\n      <template slot=\"footer\">\r\n          <el-button type=\"default\" @click=\"handleClose\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\r\n      </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n  import qs from \"qs\"\r\n\r\n  export default {\r\n      name: \"forgetpwd\",\r\n      props: [\"centerDialogVisibleSecond\"],\r\n      data() {\r\n          return {\r\n              getCode: \"\",\r\n              sendcode: \"发送验证码\",\r\n              disabled: false,\r\n              forgetpwdform: {\r\n                  phone: \"\",\r\n                  code: \"\",\r\n                  newpassword: \"\",\r\n                  repeatpassword: \"\"\r\n              },\r\n              rules: {\r\n                  phone: [\r\n                      {required: true, message: \"手机号不能为空\", trigger: \"blur\"}\r\n                  ],\r\n                  code: [\r\n                      {\r\n                          required: true, message: \"验证码不能为空\", trigger: \"blur\"\r\n                      },\r\n                  ],\r\n                  newpassword: [\r\n                      {\r\n                          required: true, message: \"新密码不能为空\", trigger: \"blur\"\r\n                      },\r\n                  ],\r\n                  repeatpassword: [\r\n                      {\r\n                          required: true, message: \"重置密码不能为空\", trigger: \"blur\"\r\n                      }\r\n                  ]\r\n              }\r\n          }\r\n      },\r\n      methods: {\r\n          //手机号正则判断\r\n          judgePhone() {\r\n              const reg = /^((13[0-9])|(14[5,7,9])|(15[^4])|(18[0-9])|(17[0,1,3,5,6,7,8]))\\d{8}$/;\r\n              //var url=\"/nptOfficialWebsite/apply/sendSms?mobile=\"+this.ruleForm.phone;\r\n              if (this.forgetpwdform.phone == '') {\r\n                  this.$message(\"请输入手机号码\")\r\n                  return false;\r\n              } else if (!reg.test(this.forgetpwdform.phone)) {\r\n                  this.$message(\"手机号格式不正确\")\r\n                  return false;\r\n              } else {\r\n                  return true;\r\n              }\r\n          },\r\n          //发送验证码\r\n          sendcodeMsg() {\r\n              let _this = this;\r\n              if (_this.judgePhone()) {\r\n                  var num = 60;\r\n                  var timer = setInterval(function () {\r\n                      num--;\r\n                      _this.disabled = true;\r\n                      _this.sendcode = num + '秒后重新获取';\r\n                      if (num === 0) {\r\n                          _this.sendcode = '获取验证码';\r\n                          _this.disabled = false;\r\n                          clearInterval(timer)\r\n                      }\r\n                  }, 1000)\r\n                  _this.$http.post(\"你的接口\", qs.stringify(\r\n                      {phoneNumber: _this.forgetpwdform.phone}\r\n                  )).then((res) => {\r\n                      _this.getCode = res;\r\n                  })\r\n              }\r\n\r\n          },\r\n          //关闭页面\r\n          handleClose() {\r\n              this.centerDialogVisibleSecond = false;\r\n              this.$emit(\"tyonke\", this.centerDialogVisibleSecond);\r\n          },\r\n\r\n          //表单提交\r\n          handleSubmit() {\r\n              let _this = this;\r\n              _this.$refs['forgetpwdform'].validate(valid => {\r\n                  if (valid) {\r\n                      if (_this.forgetpwdform.code != _this.getCode) {\r\n                          this.$message({\r\n                              type: \"error\",\r\n                              message: \"修改失败\",\r\n                              duration: 1000\r\n                          })\r\n                          return false;\r\n                      }\r\n                      return this.$message({\r\n                          type: \"success\",\r\n                          message: \"修改成功\",\r\n                          duration: 1000\r\n                      })\r\n                  } else {\r\n                      return\r\n                  }\r\n              })\r\n          }\r\n      },\r\n      watch: {\r\n          centerDialogVisibleSecond(newValue, oldValue) {\r\n              this.centerDialogVisibleSecond = newValue;\r\n          }\r\n      }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}