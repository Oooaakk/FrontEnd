{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport HubIcon from '@/components/HubIcon.vue';\nimport dropDown from '@/components/dropdown.vue';\nimport AvatarIcon from '../components/AvatarIcon.vue';\nimport request2 from \"@/utils/Request2.js\";\nimport request from '@/utils/RequestFile';\nexport default {\n  data() {\n    return {\n      components: {\n        HubIcon,\n        dropDown\n      },\n      rules: {\n        imdbmovietitle: [{\n          required: true,\n          message: \"choose title!!\",\n          trigger: \"blur\"\n        }],\n        textarea: [{\n          required: true,\n          message: \"review cannot be blank\",\n          trigger: \"blur\"\n        }],\n        rating: [{\n          required: true,\n          message: \"rating cannot be blank\",\n          trigger: \"blur\"\n        }]\n      },\n      form: {\n        imdbmovietitle: \"\",\n        textarea: \"\",\n        rating: \"\"\n      },\n      itemlist: [],\n      placeholder: \"搜索\",\n      nodatatext: \"暂无数据\",\n      selectValue: \"\",\n      dialogVisible: false,\n      movies: [],\n      options: [],\n      posterlink: \"\",\n      movieid: \"\",\n      rating_list: [{\n        value: '0',\n        label: '0'\n      }, {\n        value: '1',\n        label: '1'\n      }, {\n        value: '2',\n        label: '2'\n      }, {\n        value: '3',\n        label: '3'\n      }, {\n        value: '4',\n        label: '4'\n      }, {\n        value: '5',\n        label: '5'\n      }]\n    };\n  },\n\n  // mounted(){\n  //   this.searchTitle();\n  // },\n  methods: {\n    back() {\n      this.dialogVisible = false;\n      this.options.length = 0;\n    },\n\n    itemClick(data) {\n      this.selectValue = data;\n    },\n\n    getInputValue(searchvalue) {\n      console.log(searchvalue); // 请求获取筛选列表\n    },\n\n    searchTitle() {\n      request2.get(\"/?title=\" + this.form.imdbmovietitle).then(res => {\n        if (res.status === 200) {\n          this.dialogVisible = true;\n\n          for (let i = 0; i < res.data.results.length; i++) {\n            console.log(\"search movie\");\n            this.options.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    },\n\n    save() {\n      request.post(\"/post\", this.form).then(res => {\n        console.log(res);\n\n        if (res.stutas === 200) {\n          this.$message({\n            //返回id movie card的\n            type: \"success\",\n            message: \"successfully post the movie\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n    }\n\n  },\n  components: {\n    HubIcon\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","HubIcon","dropDown","AvatarIcon","request2","request","data","components","rules","imdbmovietitle","required","message","trigger","textarea","rating","form","itemlist","placeholder","nodatatext","selectValue","dialogVisible","movies","options","posterlink","movieid","rating_list","value","label","methods","back","length","itemClick","getInputValue","searchvalue","console","log","searchTitle","get","then","res","status","i","results","push","title","$message","type","save","post","stutas","msg"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\PostPage.vue"],"sourcesContent":["\r\n<template>\r\n\r\n  <div class=\"common-layout\">\r\n      <el-container>\r\n        <el-header class=\"header\" >\r\n          <AvatarIcon/>\r\n        </el-header>\r\n        <el-main class=\"main\">\r\n\r\n        <div class=\"posthere\">  Post here </div>  \r\n        </el-main>\r\n        <el-form\r\n        :model=\"form\"\r\n        status-icon\r\n        :rules=\"rules\"\r\n        ref=\"Form\"\r\n        label-position=\"left\"\r\n        label-width=\"100px\"\r\n        class=\"login-from\"\r\n        hide-required-aterisk=\"true\">\r\n        <el-form-item label = \"search\">\r\n          \r\n        <drop-down @inputValue=\"getInputValue\" @item-click=\"itemClick\" :itemlist=\"itemlist\" :placeholder=\"placeholder\" :nodatatext=\"nodatatext\"></drop-down>\r\n        </el-form-item>\r\n\r\n        <el-form-item label = \"Movie title: \" class=\"movietitle\">\r\n          <el-input\r\n          v-model=\"form.imdbmovietitle\" class=\"select\" placeholder=\"search movie title\" @change=\"searchTitle()\">\r\n   \r\n          </el-input>\r\n        </el-form-item >\r\n       \r\n        <el-form-item label = \"Review: \" class=\"labelcolor\">\r\n        <el-input\r\n        v-model=\"form.textarea\"\r\n        :rows=\"3\"\r\n         type=\"textarea\"\r\n        placeholder=\"Please input movie review\"\r\n        class=\"textinput\"\r\n        \r\n        />\r\n      </el-form-item>\r\n      <el-form-item class = \"rating\" label=\"Rating\" prop=\"rating\">\r\n        <el-select v-model=\"form.rating\" placeholder=\"enter your rating\">\r\n          <el-option\r\n                    v-for=\"item in rating_list\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n          </el-select>\r\n    </el-form-item>\r\n  \r\n    </el-form>\r\n    <el-button type=\"warning\" round class=\"LRbutton\" @click=\"$router.push('/moviehub/dashboard/1234');save()\">Save</el-button> \r\n  </el-container>\r\n  <el-dialog\r\n      title=\"selectMovie\"\r\n      v-model=\"dialogVisible\"\r\n      width=\"100\"\r\n      :show-close=\"false\">\r\n            <el-form>\r\n              <el-row>\r\n              <el-form-item>\r\n                <el-select v-model=\"form.imdbmovietitle\" placeholder=\"choose your movie\">\r\n                  <el-option\r\n                    v-for=\"item in options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-select>\r\n\r\n              </el-form-item>\r\n              </el-row>\r\n\r\n            <el-row>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"back()\">Back</el-button>\r\n            </el-form-item>\r\n            </el-row>\r\n            </el-form>\r\n    </el-dialog>\r\n    </div>\r\n    \r\n   <HubIcon/>\r\n  </template>\r\n\r\n\r\n  <script>\r\nimport { ref } from 'vue'\r\nimport HubIcon from '@/components/HubIcon.vue';\r\nimport dropDown from '@/components/dropdown.vue';\r\nimport AvatarIcon from '../components/AvatarIcon.vue';\r\nimport request2 from \"@/utils/Request2.js\";\r\nimport request from '@/utils/RequestFile';\r\nexport default {\r\n  data() {\r\n    return {\r\n      components: {\r\n              HubIcon,\r\n              dropDown\r\n          },\r\n      rules: {\r\n        imdbmovietitle: [\r\n                    { required: true, message: \"choose title!!\", trigger: \"blur\" },\r\n        ],\r\n        textarea: [\r\n              { required: true, message: \"review cannot be blank\", trigger: \"blur\" },\r\n        ],\r\n        rating: [\r\n              { required: true, message: \"rating cannot be blank\", trigger: \"blur\" },\r\n        ],\r\n\r\n      },\r\n      form: {\r\n        imdbmovietitle: \"\",\r\n        textarea: \"\",\r\n        rating:\"\",\r\n        \r\n      },\r\n      itemlist: [],\r\n      placeholder: \"搜索\",\r\n      nodatatext: \"暂无数据\",\r\n      selectValue: \"\",\r\n      dialogVisible: false,\r\n      movies: [],\r\n      options: [],\r\n      posterlink:\"\",\r\n      movieid:\"\",\r\n\r\n      rating_list: [{\r\n        value: '0',\r\n        label: '0'\r\n      }, {\r\n        value: '1',\r\n        label: '1'\r\n      }, {\r\n        value: '2',\r\n        label: '2'\r\n      }, {\r\n        value: '3',\r\n        label: '3'\r\n\r\n      }, {\r\n        value: '4',\r\n        label: '4'\r\n      }, {\r\n        value: '5',\r\n        label: '5'\r\n      }\r\n      ]\r\n    }\r\n  },\r\n  // mounted(){\r\n  //   this.searchTitle();\r\n  // },\r\n  methods:{\r\n    back() {\r\n      \r\n      this.dialogVisible = false;\r\n      this.options.length = 0;\r\n    },\r\n    itemClick(data) {\r\n      this.selectValue= data\r\n    },\r\n    getInputValue(searchvalue) {\r\n      console.log(searchvalue)\r\n      // 请求获取筛选列表\r\n      \r\n    },\r\n\r\n    searchTitle () {\r\n      request2.get(\"/?title=\" + this.form.imdbmovietitle).then(res => {\r\n        if(res.status === 200){\r\n          this.dialogVisible = true;\r\n          \r\n          for(let i =0; i<res.data.results.length; i++) {\r\n            console.log(\"search movie\");\r\n            this.options.push({\r\n              value:res.data.results[i].title,\r\n              label:res.data.results[i].title\r\n            })\r\n          }\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"unsucessfully search\"\r\n          })\r\n        }\r\n\r\n      })\r\n    },\r\n    save(){\r\n      request.post(\"/post\", this.form).then(res => {\r\n          console.log(res)\r\n          if (res.stutas===200) {\r\n            this.$message({\r\n              //返回id movie card的\r\n              type: \"success\",\r\n              message: \"successfully post the movie\"\r\n            })\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n    }\r\n  },\r\n  \r\n  components: { HubIcon }\r\n}\r\n</script>\r\n\r\n<style>\r\n  body {\r\nbackground-color: #222231;\r\n}\r\n.header{\r\n  background-color: black;\r\n\r\n}\r\n\r\n.LRbutton{\r\n  width:10%;\r\n  margin-top:25px;\r\n  margin-left:530px;\r\n}\r\n.main{\r\n  background-color: white;\r\n  height:64px;\r\n  \r\n}\r\n\r\n.posthere{\r\n  position: absolute;\r\n  font-weight: bold;\r\n  font-size: x-large;\r\n}\r\n.movietitle{\r\n   margin-top:50px;\r\n   margin-left:330px;\r\n\r\n}\r\n.select{\r\n  width:50%\r\n}\r\n.labelcolor{\r\n   margin-top:50px;\r\n   margin-left:330px;\r\n\r\n}\r\n.textinput{\r\n  margin-right:170px;\r\n  width:50%;\r\n \r\n}\r\n.star{\r\n  margin-left:24px;\r\n}\r\n\r\n.movietitle .el-form-item__label {\r\n  color: orange\r\n}\r\n.genre{\r\n  margin-top:50px;\r\n   margin-left:330px;\r\n}\r\n.genre .el-form-item__label {\r\n  color: orange\r\n}\r\n.poster{\r\n  margin-top:50px;\r\n   margin-left:330px;\r\n}\r\n.poster .el-form-item__label {\r\n  color: orange\r\n}\r\n.rating .el-form-item__label {\r\n  color: orange\r\n}\r\n.rating{\r\n  margin-left:330px;\r\n  margin-top:50px;\r\n}\r\n\r\n.labelcolor .el-form-item__label {\r\n  color: orange\r\n}\r\n.movietitleinput{\r\n  width:50%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}