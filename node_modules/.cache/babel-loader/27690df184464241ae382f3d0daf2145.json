{"ast":null,"code":"import request from \"@/utils/RequestFile.js\";\nexport default {\n  name: \"ForgetPassword\",\n\n  data() {\n    return {\n      active: 0,\n      Form: {\n        username: '',\n        email: ''\n      },\n      codeForm: {\n        code: ''\n      },\n      passwordForm: {\n        password: ''\n      },\n      disabled: false,\n      isUsername: false\n    };\n  },\n\n  created() {\n    let regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\n\n    if (regEmail.test(this.$route.query.username)) {\n      console.log(\"传来了邮箱\");\n      this.Form.email = this.$route.query.username;\n      this.isUsername = false;\n    } else {\n      // 传来的不是邮箱，那就是用户名\n      console.log(\"传来了用户名\");\n      this.Form.username = this.$route.query.username;\n      this.isUsername = true;\n    }\n  },\n\n  methods: {\n    isEmail() {\n      let regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\n\n      if (!regEmail.test(this.Form.email)) {\n        this.$message({\n          message: '邮箱格式不正确',\n          type: 'error'\n        });\n        return false;\n      }\n\n      return true;\n    },\n\n    beforePost() {\n      if (this.Form.username === '' || this.Form.email === '') {\n        // 重置密码时，如果用户名或者邮箱未输入，那么提醒用户输入\n        if (this.Form.username === '') {\n          this.$message({\n            message: '警告, 用户名未输入哦',\n            type: 'warning'\n          });\n          this.$refs.username.focus();\n        } else {\n          this.$message({\n            message: '警告, 邮箱未输入呀',\n            type: 'warning'\n          });\n          this.$refs.email.focus();\n        }\n\n        return false;\n      } else {\n        //进行邮箱格式的检测\n        return this.isEmail();\n      }\n    },\n\n    next() {\n      // 当面板为0时，先判断用户名和邮箱是否输入，进行相关的验证\n      if (this.active === 0) {\n        let isFinished = this.beforePost();\n\n        if (isFinished) {\n          //数据输入正确后，将按钮禁掉，并提示相关信息，然后数据发送到后台\n          this.disabled = true;\n          this.$notify.info({\n            title: '提示',\n            message: '数据正确发送，请耐心等待，勿重复操作！',\n            duration: 0,\n            offset: 100\n          });\n          this.post();\n        }\n      } // 当面板为1时，则到了用户输入验证码的时候, 将验证码传入后台\n\n\n      if (this.active === 1) {\n        // 如果验证码未输入，提示用户\n        if (this.codeForm.code === '') {\n          this.$notify({\n            title: '警告',\n            message: '警告, 验证码未输入，请去您邮箱中查看!',\n            type: 'warning',\n            offset: 100\n          });\n          this.$refs.code.focus();\n        } else {\n          request.post('/user/forgetpassword', {\n            code: this.codeForm.code,\n            username: this.username\n          }).then(successResponse => {\n            if (successResponse.data.code === 200) {\n              //验证码输入正确，\n              this.active++;\n              this.$notify({\n                title: '成功',\n                message: '验证码匹配正确！',\n                type: 'success',\n                duration: 0,\n                offset: 100\n              });\n            } else if (successResponse.data.code === 400) {\n              //验证码匹配错误返回对应信息\n              this.$message.error(successResponse.data.message);\n            }\n          });\n        }\n      } // 当面板为2时，则到了用户输入密码的时候, 将密码传入后台\n\n\n      if (this.active === 2) {\n        //在发送密码之前，先校验一下是否输入了，不能让用户不小心输入了空密码\n        if (this.passwordForm.password === '') {\n          this.$notify({\n            title: '警告',\n            message: '警告, 新密码未输入',\n            type: 'warning',\n            offset: 100\n          });\n          this.$refs.password.focus();\n        } else {\n          let password_md5 = this.$md5(this.passwordForm.password);\n          request.post('/user/forgetPassword', {\n            password: password_md5,\n            username: this.username\n          }).then(successResponse => {\n            if (successResponse.data.code === 200) {\n              //密码修改成功\n              this.$notify({\n                title: '成功',\n                message: '该账号密码修改正确！',\n                type: 'success',\n                duration: 0,\n                offset: 100\n              });\n              let path = this.$route.query.redirect;\n              this.$router.replace({\n                path: path === '/' || path === undefined ? '/login' : path\n              });\n            } else if (successResponse.data.code === 400) {\n              //修改密码失败，返回对应信息\n              this.$message.error(successResponse.data.message);\n            }\n          });\n        }\n      }\n    },\n\n    post() {\n      console.log(this.Form.username);\n      console.log(this.Form.email);\n      request.post('/user/forgetPassword', {\n        username: this.Form.username,\n        email: this.Form.email\n      }).then(successResponse => {\n        if (successResponse.data.code === 200) {\n          // 如果返回的结果正确，那么需要发送邮件到对应的用户邮箱中，用户自己登录邮箱后找到对应的链接后才可以输入新密码\n          this.$notify({\n            title: '成功',\n            message: '已向' + this.Form.email + '发送验证码，请在5分钟之内修改密码，否则验证码失效',\n            type: 'success',\n            duration: 0,\n            offset: 100\n          }); //跳转到下一个面板，并且将按钮恢复正常\n\n          this.active++;\n          this.disabled = false; //将用户username保存下来\n\n          this.username = successResponse.data.result;\n        } else if (successResponse.data.code === 400) {\n          //如果用户名和密码匹配错误，那么显示错误信息，并让按钮重新可用\n          this.$notify({\n            title: '失败',\n            message: successResponse.data.message + \"未知错误！\",\n            type: 'error',\n            duration: 0,\n            offset: 100\n          });\n          this.disabled = false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","active","Form","username","email","codeForm","code","passwordForm","password","disabled","isUsername","created","regEmail","test","$route","query","console","log","methods","isEmail","$message","message","type","beforePost","$refs","focus","next","isFinished","$notify","info","title","duration","offset","post","then","successResponse","error","password_md5","$md5","path","redirect","$router","replace","undefined","result"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\ForgetPassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"resetPassword\">\r\n      <div class=\"container\">\r\n          <el-steps :active=\"active\" :space=\"200\" finish-status=\"success\"  align-center>\r\n              <el-step title=\"验证用户名和邮箱\" icon=\"el-icon-edit\"></el-step>\r\n              <el-step title=\"输入验证码\" icon=\"el-icon-s-promotion\"></el-step>\r\n              <el-step title=\"设置新密码\" icon=\"el-icon-key\"></el-step>\r\n          </el-steps>\r\n          <div v-if=\"active === 0\" class=\"common_div\">\r\n              <el-form :model=\"Form\"  class=\"user-container\" label-position=\"left\" label-width=\"60px\" size=\"medium\">\r\n                  <el-form-item  style=\"float: right; width: 80%\" label=\"用户名\">\r\n                      <el-input type=\"text\" v-model=\"Form.username\" autofocus ref=\"username\" auto-complete=\"off\"\r\n                                placeholder=\"请输入要找回密码的用户名\" prefix-icon=\"el-icon-user-solid\" spellcheck=\"false\" :disabled=\"isUsername\">\r\n                      </el-input>\r\n                  </el-form-item>\r\n                  <el-form-item style=\"float: right; width: 80%\" label=\"邮箱号\">\r\n                      <el-input type=\"text\" v-model=\"Form.email\" autofocus ref=\"email\" auto-complete=\"off\"\r\n                                placeholder=\"请输入用来找回密码的邮箱\" prefix-icon=\"el-icon-message\" spellcheck=\"false\" :disabled=\"!isUsername\">\r\n                      </el-input>\r\n                  </el-form-item>\r\n              </el-form>\r\n          </div>\r\n          <div v-if=\"active === 1\" class=\"common_div\">\r\n              <el-form :model=\"codeForm\"  class=\"user-container\" label-position=\"left\" label-width=\"60px\" size=\"medium\">\r\n                  <el-form-item  style=\"float: right; width: 80%\" label=\"验证码\">\r\n                      <el-input type=\"text\" v-model=\"codeForm.code\" autofocus ref=\"code\" auto-complete=\"off\"\r\n                                placeholder=\"请输入邮箱验证码\" prefix-icon=\"el-icon-s-promotion\" spellcheck=\"false\">\r\n                      </el-input>\r\n                  </el-form-item>\r\n              </el-form>\r\n          </div>\r\n          <div v-if=\"active === 2\" class=\"common_div\">\r\n              <el-form :model=\"passwordForm\"  class=\"user-container\" label-position=\"left\" label-width=\"60px\" size=\"medium\">\r\n                  <el-form-item  style=\"float: right; width: 80%\" label=\"新密码\">\r\n                      <el-input type=\"password\" v-model=\"passwordForm.password\" autofocus ref=\"password\"\r\n                                auto-complete=\"off\" placeholder=\"请输入新密码\" prefix-icon=\"el-icon-key\" >\r\n                      </el-input>\r\n                  </el-form-item>\r\n              </el-form>\r\n          </div>\r\n          <div class=\"common_div\">\r\n              <el-button  @click=\"next\" :disabled=\"disabled\" class=\"action_button\">下一步</el-button>\r\n          </div>\r\n\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import request from \"@/utils/RequestFile.js\"\r\nexport default {\r\n  name: \"ForgetPassword\",\r\n\r\n  data() {\r\n      return {\r\n          active: 0,\r\n          Form: {\r\n              username: '',\r\n              email: '',\r\n          },\r\n          codeForm: {\r\n              code: '',\r\n          },\r\n          passwordForm: {\r\n              password: '',\r\n          },\r\n          disabled: false,\r\n          isUsername: false,\r\n      }\r\n  },\r\n  created() {\r\n      let regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\r\n      if (regEmail.test(this.$route.query.username)) {\r\n          console.log(\"传来了邮箱\")\r\n          this.Form.email = this.$route.query.username;\r\n          this.isUsername = false;\r\n      } else {\r\n          // 传来的不是邮箱，那就是用户名\r\n          console.log(\"传来了用户名\")\r\n          this.Form.username = this.$route.query.username;\r\n          this.isUsername = true;\r\n      }\r\n\r\n  },\r\n  methods: {\r\n      isEmail() {\r\n          let regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\r\n          if (!regEmail.test(this.Form.email)) {\r\n              this.$message({\r\n                  message: '邮箱格式不正确',\r\n                  type: 'error'\r\n              });\r\n              return false;\r\n          }\r\n          return true;\r\n      },\r\n      beforePost () {\r\n          if (this.Form.username === '' || this.Form.email === '') {\r\n              // 重置密码时，如果用户名或者邮箱未输入，那么提醒用户输入\r\n              if (this.Form.username === '') {\r\n                  this.$message({\r\n                      message: '警告, 用户名未输入哦',\r\n                      type: 'warning'\r\n                  });\r\n                  this.$refs.username.focus();\r\n              }else {\r\n                  this.$message({\r\n                      message: '警告, 邮箱未输入呀',\r\n                      type: 'warning'\r\n                  });\r\n                  this.$refs.email.focus();\r\n              }\r\n              return false;\r\n          }else {\r\n              //进行邮箱格式的检测\r\n              return this.isEmail();\r\n          }\r\n      },\r\n      next() {\r\n          // 当面板为0时，先判断用户名和邮箱是否输入，进行相关的验证\r\n          if (this.active === 0) {\r\n              let isFinished = this.beforePost();\r\n              if (isFinished) {\r\n                  //数据输入正确后，将按钮禁掉，并提示相关信息，然后数据发送到后台\r\n                  this.disabled = true;\r\n                  this.$notify.info({\r\n                      title: '提示',\r\n                      message: '数据正确发送，请耐心等待，勿重复操作！',\r\n                      duration: 0,\r\n                      offset: 100,\r\n                  });\r\n                  this.post();\r\n              }\r\n          }\r\n          // 当面板为1时，则到了用户输入验证码的时候, 将验证码传入后台\r\n          if (this.active === 1) {\r\n              // 如果验证码未输入，提示用户\r\n              if (this.codeForm.code === '') {\r\n                  this.$notify({\r\n                      title: '警告',\r\n                      message: '警告, 验证码未输入，请去您邮箱中查看!',\r\n                      type: 'warning',\r\n                      offset: 100,\r\n                  });\r\n                  this.$refs.code.focus();\r\n              }else {\r\n                request.post('/user/forgetpassword', {\r\n                      code: this.codeForm.code,\r\n                      username: this.username,\r\n                  }).then(successResponse => {\r\n                      if (successResponse.data.code === 200) {\r\n                          //验证码输入正确，\r\n                          this.active++;\r\n                          this.$notify({\r\n                              title: '成功',\r\n                              message: '验证码匹配正确！',\r\n                              type: 'success',\r\n                              duration: 0,\r\n                              offset: 100,\r\n                          });\r\n                      }else if (successResponse.data.code === 400) {\r\n                          //验证码匹配错误返回对应信息\r\n                          this.$message.error(successResponse.data.message);\r\n                      }\r\n                  })\r\n              }\r\n\r\n          }\r\n          // 当面板为2时，则到了用户输入密码的时候, 将密码传入后台\r\n          if (this.active === 2) {\r\n              //在发送密码之前，先校验一下是否输入了，不能让用户不小心输入了空密码\r\n              if (this.passwordForm.password === '') {\r\n                  this.$notify({\r\n                      title: '警告',\r\n                      message: '警告, 新密码未输入',\r\n                      type: 'warning',\r\n                      offset: 100,\r\n                  });\r\n                  this.$refs.password.focus();\r\n              }else {\r\n                  let password_md5 = this.$md5(this.passwordForm.password);\r\n                  request.post('/user/forgetPassword', {\r\n                      password: password_md5,\r\n                      username: this.username,\r\n                  }).then(successResponse => {\r\n                      if (successResponse.data.code === 200) {\r\n                          //密码修改成功\r\n                          this.$notify({\r\n                              title: '成功',\r\n                              message: '该账号密码修改正确！',\r\n                              type: 'success',\r\n                              duration: 0,\r\n                              offset: 100,\r\n                          });\r\n                          let path = this.$route.query.redirect;\r\n                          this.$router.replace({path: path === '/' || path === undefined ? '/login' : path})\r\n                      }else if (successResponse.data.code === 400) {\r\n                          //修改密码失败，返回对应信息\r\n                          this.$message.error(successResponse.data.message);\r\n                      }\r\n                  })\r\n              }\r\n          }\r\n      },\r\n      post(){\r\n          console.log(this.Form.username)\r\n          console.log(this.Form.email)\r\n          request\r\n              .post('/user/forgetPassword', {\r\n                  username: this.Form.username,\r\n                  email: this.Form.email,\r\n              })\r\n              .then(successResponse => {\r\n                  if (successResponse.data.code === 200) {\r\n                      // 如果返回的结果正确，那么需要发送邮件到对应的用户邮箱中，用户自己登录邮箱后找到对应的链接后才可以输入新密码\r\n                      this.$notify({\r\n                          title: '成功',\r\n                          message: '已向'+ this.Form.email + '发送验证码，请在5分钟之内修改密码，否则验证码失效',\r\n                          type: 'success',\r\n                          duration: 0,\r\n                          offset: 100\r\n                      });\r\n                      //跳转到下一个面板，并且将按钮恢复正常\r\n                      this.active++;\r\n                      this.disabled = false;\r\n                      //将用户username保存下来\r\n                      this.username = successResponse.data.result;\r\n                  }else if (successResponse.data.code === 400) {\r\n                      //如果用户名和密码匹配错误，那么显示错误信息，并让按钮重新可用\r\n                      this.$notify({\r\n                          title: '失败',\r\n                          message: successResponse.data.message + \"未知错误！\",\r\n                          type: 'error',\r\n                          duration: 0,\r\n                          offset: 100,\r\n                      });\r\n                      this.disabled = false;\r\n                  }\r\n              })\r\n             \r\n      },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .resetPassword{\r\n      background-position: center;\r\n      height: 100%;\r\n      width: 100%;\r\n      background-size: cover;\r\n      position: fixed;\r\n  }\r\n  .container{\r\n      border-radius: 15px;\r\n      background-clip: padding-box;\r\n      margin: 10% auto;\r\n      width: 30%;\r\n      padding: 25px 30px;\r\n      background: #fff;\r\n      border: 1px solid #eaeaea;\r\n      box-shadow: 0 0 25px #cac6c6;\r\n      opacity: 0.7;\r\n  }\r\n  .common_div{\r\n      margin-top: 5%;\r\n  }\r\n  .user-container {\r\n      width: 80%;\r\n      background: #fff;\r\n\r\n  }\r\n  .action_button {\r\n      width: 20%;\r\n      margin-top: 3%;\r\n      text-align: center;\r\n  }\r\n\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}