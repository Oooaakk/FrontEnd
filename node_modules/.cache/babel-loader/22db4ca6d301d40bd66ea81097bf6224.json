{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Search } from '@element-plus/icons-vue';\nimport HubIcon from '@/components/HubIcon.vue';\nimport SearchBar from '@/components/SearchBar.vue';\nimport request2 from \"@/utils/Request2.js\";\nexport default {\n  data() {\n    return {\n      components: {\n        Search,\n        HubIcon\n      },\n      input1: '',\n      value: '',\n      value2: '',\n      options: [{\n        value: 'Drama',\n        label: 'Drama'\n      }, {\n        value: 'Comedy',\n        label: 'Comedy'\n      }, {\n        value: 'Horror',\n        label: 'Horror'\n      }, {\n        value: 'Thriller',\n        label: 'Thriller'\n      }, {\n        value: 'Action',\n        label: 'Action'\n      }, {\n        value: 'Sci-Fi',\n        label: 'Sci-Fi'\n      }, {\n        value: 'Crime',\n        label: 'Crime'\n      }, {\n        value: 'Adventure',\n        label: 'Adventure'\n      }, {\n        value: 'Other',\n        label: 'Other'\n      }],\n      optionsSort: [{\n        label: 'A-Z Ascending',\n        value: 'alpha,asc'\n      }, {\n        label: 'A-Z Descending',\n        value: 'alpha,desc'\n      }, {\n        label: 'User Rating Ascending',\n        value: 'user_rating,asc'\n      }, {\n        label: 'User Rating Descending',\n        value: 'user_rating,desc'\n      }, {\n        label: 'Year Descending',\n        value: 'year,desc'\n      }, {\n        label: 'Year Ascending',\n        value: 'year,asc'\n      }],\n      movietitle: [],\n      movieposter: [],\n      moviegenre: [],\n      movieofficialrating: [],\n      movieid: [],\n      movieplot: [],\n      itemlist: [],\n      //postlist:[],\n      movielist: [],\n      placeholder: \"search your movie\",\n      nodatatext: \"no input currently\",\n      selectValue: \"\",\n      last: \"\",\n      outcome: '',\n      poster: \"\",\n      rating: \"\",\n      title: \"\"\n    };\n  },\n\n  mounted() {\n    this.getTopmovies();\n  },\n\n  methods: {\n    itemClick(data) {\n      this.selectValue = data;\n\n      for (let i = 0; i < this.movielist.length; i++) {\n        if (this.selectValue === this.movielist[i].title) {\n          this.$router.push({\n            path: '/Moviehub/contentpage',\n            query: {\n              poster: this.movielist[i].image,\n              rating: this.movielist[i].rating,\n              title: this.movielist[i].title\n            }\n          });\n        }\n      } //this.$router.push({path: '/Moviehub/contentpage/' + })\n\n    },\n\n    jumptoContent(index) {\n      this.$router.push({\n        path: '/Moviehub/contentpage',\n        query: {\n          poster: this.movieposter[index].value,\n          rating: this.movieofficialrating[index].value,\n          title: this.movietitle[index].value,\n          plot: this.movieplot[index].value,\n          genres: this.moviegenre[index].value\n        }\n      });\n    },\n\n    getInputValue(searchvalue) {\n      console.log(searchvalue);\n      /*if(this.last !== searchvalue){\r\n        this.itemlist.length = 0;\r\n      }*/\n\n      this.last = searchvalue;\n      request2.get(\"/?title=\" + searchvalue).then(res => {\n        if (res.status === 200) {\n          this.itemlist.length = 0;\n\n          for (let i = 0; i < res.data.results.length; i++) {\n            this.movielist.push({\n              title: res.data.results[i].title,\n              image: res.data.results[i].image,\n              rating: res.data.results[i].imDbRating\n            });\n            this.itemlist.push(res.data.results[i].title); //this.postlist.push(res.data.results[i].image);\n          }\n\n          console.log(res.data.results.length);\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      }); // 请求获取筛选列表\n    },\n\n    searchrelmovie() {\n      this.clearall();\n\n      if (this.value2 !== '' && this.value === '') {\n        this.outcome = request2.get(\"/?sort=\" + this.value2);\n      } else if (this.value2 === '' && this.value !== '') {\n        this.outcome = request2.get(\"/?genres=\" + this.value);\n      } else if (this.value2 === '' && this.value === '') {\n        this.getTopmovies();\n      } else if (this.value2 !== '' && this.value !== '') {\n        this.outcome = request2.get(\"/?genres=\" + this.value + '&sort=' + this.value2);\n      }\n\n      this.outcome.then(res => {\n        if (res.status === 200) {\n          for (let i = 0; i < res.data.results.length; i++) {\n            console.log(\"search movie\");\n            this.movietitle.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n            this.movieofficialrating.push({\n              value: res.data.results[i].imDbRating,\n              label: res.data.results[i].imDbRating\n            });\n            this.movieposter.push({\n              value: res.data.results[i].image,\n              label: res.data.results[i].image\n            });\n            this.movieid.push({\n              value: res.data.results[i].id,\n              label: res.data.results[i].id\n            });\n            this.movieplot.push({\n              value: res.data.results[i].plot,\n              label: res.data.results[i].plot\n            });\n            this.moviegenre.push({\n              value: res.data.results[i].genres,\n              label: res.data.results[i].genres\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    },\n\n    clearall() {\n      this.moviegenre.length = 0;\n      this.movieid.length = 0;\n      this.movieplot.length = 0;\n      this.moviegenre.length = 0;\n      this.movieofficialrating.length = 0;\n    },\n\n    getTopmovies() {\n      //requestmovie.get(\"/k_td4a1cav\").\n      // request2.get(\"/?groups=top_250\").\n      let outcome = request2.get(\"/?groups=top_250\");\n      outcome.then(res => {\n        if (res.status === 200) {\n          for (let i = 0; i < res.data.results.length; i++) {\n            console.log(\"search movie\");\n            this.movietitle.push({\n              value: res.data.results[i].title,\n              label: res.data.results[i].title\n            });\n            this.movieofficialrating.push({\n              value: res.data.results[i].imDbRating,\n              label: res.data.results[i].imDbRating\n            });\n            this.movieposter.push({\n              value: res.data.results[i].image,\n              label: res.data.results[i].image\n            });\n            this.movieid.push({\n              value: res.data.results[i].id,\n              label: res.data.results[i].id\n            });\n            this.movieplot.push({\n              value: res.data.results[i].plot,\n              label: res.data.results[i].plot\n            });\n            this.moviegenre.push({\n              value: res.data.results[i].genres,\n              label: res.data.results[i].genres\n            });\n          }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: \"unsucessfully search\"\n          });\n        }\n      });\n    }\n\n  },\n  components: {\n    HubIcon,\n    SearchBar\n  }\n};","map":{"version":3,"mappings":"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","names":["Search","HubIcon","SearchBar","request2","data","components","input1","value","value2","options","label","optionsSort","movietitle","movieposter","moviegenre","movieofficialrating","movieid","movieplot","itemlist","movielist","placeholder","nodatatext","selectValue","last","outcome","poster","rating","title","mounted","getTopmovies","methods","itemClick","i","length","$router","push","path","query","image","jumptoContent","index","plot","genres","getInputValue","searchvalue","console","log","get","then","res","status","results","imDbRating","$message","type","message","searchrelmovie","clearall","id"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\MainPageVisitor.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header class=\"header\">\r\n        \r\n      <SearchBar class=\"searchbar\" @inputValue=\"getInputValue\" @item-click=\"itemClick\"\r\n       :itemlist=\"itemlist\" :placeholder=\"placeholder\" :nodatatext=\"nodatatext\"></SearchBar>\r\n       <!--<SearchBar class=\"searchbar\" @inputValue=\"getInputValue\" @item-click=\"itemClick\"\r\n       :itemlist=\"itemlist\" :postlist=\"postlist\" :placeholder=\"placeholder\" :nodatatext=\"nodatatext\"></SearchBar>-->\r\n       <el-button type=\"warning\" round class=\"LRbutton\" @click=\"$router.push('/moviehub/loginpage')\">Login/Register</el-button> \r\n  \r\n      </el-header>\r\n      \r\n      <el-main class=\"main\">\r\n        <div>\r\n        <div class=\"recommend\">Recommend movies</div>\r\n      <div class=\"selectbtngroup\">\r\n        <el-select v-model=\"value2\" class=\"select\" placeholder=\"sortBy\">\r\n    <el-option\r\n      v-for=\"item in optionsSort\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\"\r\n      \r\n    />\r\n  </el-select>\r\n  \r\n  <el-select v-model=\"value\" class=\"select\" placeholder=\"filter\">\r\n    <el-option\r\n      v-for=\"item in options\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\"\r\n      \r\n    />\r\n  </el-select>\r\n  <el-button @click=\"searchrelmovie()\">Search recommended movies</el-button>\r\n</div>\r\n \r\n</div>\r\n        <el-divider />\r\n        <!--movie card-->\r\n        <el-space wrap>\r\n            <el-card v-for=\"(item,i) in movietitle\" :key=\"i\" class=\"box-card\" style=\"width: 250px;margin-right:20px\" \r\n            @click=\"jumptoContent(i)\">\r\n              <template #header>\r\n                <div class=\"card-header\">\r\n                  <span>{{movietitle[i].value}}({{moviegenre[i].value}})</span>\r\n                  <el-divider/>\r\n                  <span><el-image :src=\"movieposter[i].value\"></el-image></span>\r\n                  <el-divider/>\r\n                  <span>imdb rating:{{movieofficialrating[i].value}}</span>\r\n                </div>\r\n              </template>\r\n            </el-card>\r\n        </el-space>\r\n      </el-main>\r\n      \r\n    </el-container>\r\n    \r\n  </div>\r\n  <HubIcon/>\r\n  </template>\r\n  \r\n  <script>\r\n  import { Search } from '@element-plus/icons-vue'\r\n  import HubIcon from '@/components/HubIcon.vue';\r\n\r\n  import SearchBar from '@/components/SearchBar.vue';\r\n  import request2 from \"@/utils/Request2.js\";\r\n  export default{\r\n      data(){\r\n          return{\r\n            components: {\r\n                Search,\r\n                HubIcon\r\n            },\r\n            input1:'',\r\n            value:'',\r\n            value2:'',\r\n            options : [\r\n          {\r\n            value: 'Drama',\r\n            label: 'Drama',\r\n          },\r\n          {\r\n            value: 'Comedy',\r\n            label: 'Comedy',\r\n          },\r\n          {\r\n            value: 'Horror',\r\n            label: 'Horror',\r\n          },\r\n          {\r\n            value: 'Thriller',\r\n            label: 'Thriller',\r\n          },\r\n          {\r\n            value: 'Action',\r\n            label: 'Action',\r\n          },\r\n          {\r\n            value: 'Sci-Fi',\r\n            label: 'Sci-Fi',\r\n          },\r\n          {\r\n            value: 'Crime',\r\n            label: 'Crime',\r\n          },\r\n          {\r\n            value: 'Adventure',\r\n            label: 'Adventure',\r\n          },\r\n          {\r\n            value: 'Other',\r\n            label: 'Other',\r\n          }\r\n          ],\r\n          optionsSort: [\r\n          {\r\n            label: 'A-Z Ascending',\r\n            value: 'alpha,asc',\r\n          },\r\n          {\r\n            label: 'A-Z Descending',\r\n            value: 'alpha,desc',\r\n          },\r\n          {\r\n            label: 'User Rating Ascending',\r\n            value: 'user_rating,asc',\r\n          },\r\n          {\r\n            label: 'User Rating Descending',\r\n            value: 'user_rating,desc',\r\n          },\r\n          {\r\n            label: 'Year Descending',\r\n            value: 'year,desc',\r\n          },\r\n          {\r\n            label: 'Year Ascending',\r\n            value: 'year,asc',\r\n          },\r\n            \r\n            ],\r\n            movietitle:[],\r\n            movieposter:[],\r\n            moviegenre:[],\r\n            movieofficialrating:[],\r\n            movieid:[],\r\n            movieplot:[],\r\n            itemlist: [],\r\n            //postlist:[],\r\n            movielist : [],\r\n            placeholder: \"search your movie\",\r\n            nodatatext: \"no input currently\",\r\n            selectValue: \"\",\r\n            last: \"\",\r\n            outcome:'',\r\n            poster: \"\",\r\n            rating: \"\",\r\n            title: \"\"\r\n          }\r\n        },\r\n        mounted(){\r\n          this.getTopmovies()\r\n        },\r\n        methods:{\r\n          itemClick(data) {\r\n            this.selectValue= data\r\n            for(let i = 0; i<this.movielist.length; i++){\r\n              if(this.selectValue === this.movielist[i].title){\r\n                this.$router.push({path: '/Moviehub/contentpage', query: {\r\n                  poster: this.movielist[i].image, rating: this.movielist[i].rating, title: this.movielist[i].title}});\r\n                \r\n              }\r\n            }\r\n         \r\n            //this.$router.push({path: '/Moviehub/contentpage/' + })\r\n          },\r\n        \r\n          jumptoContent(index) {\r\n            this.$router.push({path: '/Moviehub/contentpage', query: {\r\n              poster: this.movieposter[index].value,rating: this.movieofficialrating[index].value,\r\n              title: this.movietitle[index].value,plot:this.movieplot[index].value,genres:this.moviegenre[index].value}\r\n            });\r\n          \r\n  \r\n          },\r\n          getInputValue(searchvalue) {\r\n            console.log(searchvalue);\r\n            \r\n            /*if(this.last !== searchvalue){\r\n              this.itemlist.length = 0;\r\n            }*/\r\n            this.last = searchvalue;\r\n            request2.get(\"/?title=\" + searchvalue).then(res => {\r\n              if(res.status === 200){\r\n                this.itemlist.length = 0;\r\n                for(let i =0; i<res.data.results.length; i++) {\r\n                  this.movielist.push({\r\n                    title: res.data.results[i].title,\r\n                    image: res.data.results[i].image,\r\n                    rating: res.data.results[i].imDbRating\r\n                  });\r\n                  this.itemlist.push(res.data.results[i].title);\r\n                  //this.postlist.push(res.data.results[i].image);\r\n                }\r\n                console.log(res.data.results.length);\r\n                \r\n              }else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n            // 请求获取筛选列表\r\n            \r\n          },\r\n          searchrelmovie(){\r\n            this.clearall();\r\n            if (this.value2!=='' && this.value===''){\r\n              this.outcome=request2.get(\"/?sort=\"+this.value2)\r\n            }else if(this.value2==='' && this.value!==''){\r\n\r\n              this.outcome=request2.get(\"/?genres=\"+this.value)\r\n\r\n            }else if(this.value2==='' && this.value===''){\r\n              this.getTopmovies()\r\n            }else if(this.value2!=='' && this.value!==''){\r\n              this.outcome=request2.get(\"/?genres=\"+this.value+'&sort='+this.value2)\r\n            }\r\n              this.outcome.then(res=>{\r\n              if(res.status === 200){\r\n            \r\n                  for(let i =0; i<res.data.results.length; i++) {\r\n                    console.log(\"search movie\");\r\n                    this.movietitle.push({\r\n                      value:res.data.results[i].title,\r\n                      label:res.data.results[i].title\r\n                    })\r\n                    this.movieofficialrating.push({\r\n                      value:res.data.results[i].imDbRating,\r\n                      label:res.data.results[i].imDbRating\r\n                    })\r\n                    this.movieposter.push({\r\n                      value:res.data.results[i].image,\r\n                      label:res.data.results[i].image\r\n                    })\r\n                    this.movieid.push({\r\n                      value:res.data.results[i].id,\r\n                      label:res.data.results[i].id\r\n                    })\r\n                    this.movieplot.push({\r\n                      value:res.data.results[i].plot,\r\n                      label:res.data.results[i].plot\r\n                    })\r\n                    this.moviegenre.push({\r\n                      value:res.data.results[i].genres,\r\n                      label:res.data.results[i].genres\r\n                    })\r\n                  }\r\n                }else {\r\n                    this.$message({\r\n                      type: \"error\",\r\n                      message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n          \r\n          },\r\n          clearall(){\r\n             this.moviegenre.length=0;\r\n             this.movieid.length=0;\r\n             this.movieplot.length=0;\r\n             this.moviegenre.length=0;\r\n             this.movieofficialrating.length=0;\r\n          },\r\n          getTopmovies(){\r\n            //requestmovie.get(\"/k_td4a1cav\").\r\n            // request2.get(\"/?groups=top_250\").\r\n            let outcome=request2.get(\"/?groups=top_250\")\r\n            outcome.then(res=>{\r\n              if(res.status === 200){\r\n            \r\n                  for(let i =0; i<res.data.results.length; i++) {\r\n                    console.log(\"search movie\");\r\n                    this.movietitle.push({\r\n                      value:res.data.results[i].title,\r\n                      label:res.data.results[i].title\r\n                    })\r\n                    this.movieofficialrating.push({\r\n                      value:res.data.results[i].imDbRating,\r\n                      label:res.data.results[i].imDbRating\r\n                    })\r\n                    this.movieposter.push({\r\n                      value:res.data.results[i].image,\r\n                      label:res.data.results[i].image\r\n                    })\r\n                    this.movieid.push({\r\n                      value:res.data.results[i].id,\r\n                      label:res.data.results[i].id\r\n                    })\r\n                    this.movieplot.push({\r\n                      value:res.data.results[i].plot,\r\n                      label:res.data.results[i].plot\r\n                    })\r\n                    this.moviegenre.push({\r\n                      value:res.data.results[i].genres,\r\n                      label:res.data.results[i].genres\r\n                    })\r\n                  }\r\n                }else {\r\n                    this.$message({\r\n                      type: \"error\",\r\n                      message: \"unsucessfully search\"\r\n                })\r\n              }\r\n            })\r\n          }\r\n        },\r\n        \r\n        components: { HubIcon,SearchBar},\r\n      };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .header{\r\n  background-color: black;\r\n    \r\n  }\r\n  .LRbutton{\r\n  position:relative;\r\n  left:560px;\r\n  top:15px\r\n  }\r\n  .search{\r\n  width:45%;\r\n  margin-top: 15px;\r\n  }\r\n  .select{\r\n  margin-left:10px;\r\n  width:10%;\r\n  right:200px;\r\n  }\r\n  .setting{\r\n  margin-top:10px\r\n  }\r\n  .recommend{\r\n  position:absolute;\r\n  font-size:x-large;\r\n  font-weight:bold;\r\n  color:orange\r\n  }\r\n  .avatar{\r\n  position:relative;\r\n  top:-36.5px;\r\n  right:-600px;\r\n  }\r\n  \r\n  .newwbutton{\r\n    margin-top:15px;\r\n    margin-left:400px;\r\n    \r\n  }\r\n  .selectbtngroup{\r\n    margin-left:100px\r\n  }\r\n  .main{\r\n  background-color: rgb(55, 55, 60);\r\n}\r\n  </style>"]},"metadata":{},"sourceType":"module"}