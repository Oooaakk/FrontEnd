{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport HubIcon from '@/components/HubIcon.vue';\nimport request from \"@/utils/RequestFile.js\";\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the password'));\n      } else {\n        if (value != '' && (this.ruleForm.pass.length < 8 || this.ruleForm.pass.length > 16)) {\n          console.log(\"incorrect password form!!\");\n          callback(new Error('Please input correct form of password'));\n        }\n      }\n    };\n\n    var validatePass1 = (rule, value, callback) => {\n      var reg = /^([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\\.[A-Z|a-z]{2,})+$/;\n\n      if (!value) {\n        return callback(new Error('cannot input empty email!'));\n      } else if (!reg.test(value)) {\n        return callback(new Error('please input valid email!'));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass3 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the password again'));\n      } else if (value !== this.ruleForm.checkPass) {\n        callback(new Error(\"Two inputs don't match!\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass4 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the username'));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass5 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the age'));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass6 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please choose the gender'));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePass7 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('Please input the verification code'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      options: [{\n        value: 'Male',\n        label: 'Male'\n      }, {\n        value: 'Female',\n        label: 'Female'\n      }],\n      ruleForm: {\n        uname: \"\",\n        pass: \"\",\n        password: \"\",\n        checkgender: \"\",\n        checkusername: \"\",\n        confirmPass: \"\",\n        checkage: \"\"\n      },\n      rules: {\n        uname: [{\n          required: true,\n          validator: validatePass1,\n          message: \"用户名不能为空！\",\n          trigger: \"blur\"\n        }],\n        pass: [{\n          required: true,\n          validator: validatePass,\n          trigger: \"blur\"\n        }],\n        confirmPass: [{\n          required: true,\n          validator: validatePass3,\n          trigger: \"blur\"\n        }],\n        checkusername: [{\n          required: true,\n          validator: validatePass4,\n          trigger: \"blur\"\n        }],\n        checkage: [{\n          required: true,\n          validator: validatePass5,\n          trigger: \"blur\"\n        }],\n        checkgender: [{\n          required: true,\n          validator: validatePass6,\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          validator: validatePass7,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n\n  methods: {\n    submitEmail() {\n      // 验证表单中的账号密码是否有效，因为在上面rules中定义为了必填 required: true\n      console.log('submit!');\n      request.post(\"/user/email\", {\n        email: this.ruleForm.uname\n      }).then(res => {\n        console.log(\"success\");\n      });\n    },\n\n    submitForm() {\n      console.log(\"register!\");\n      request.post(\"/user/register\", {\n        email: this.ruleForm.uname,\n        password: this.ruleForm.pass,\n        verificationCode: this.ruleForm.password,\n        age: this.ruleForm.checkage,\n        gender: this.ruleForm.checkgender,\n        username: this.ruleForm.checkusername\n      }).then(res => {\n        if (res.status === 200) {\n          this.$message({\n            type: \"success\",\n            message: \"successfully registered\"\n          });\n          this.$router.push('/moviehub/loginpage');\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.message\n          });\n        }\n      });\n    },\n\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n\n    goBack() {\n      this.$router.go(-1);\n    }\n\n  },\n  components: {\n    HubIcon\n  }\n};","map":{"version":3,"mappings":"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","names":["HubIcon","request","data","validatePass","rule","value","callback","Error","ruleForm","pass","length","console","log","validatePass1","reg","test","validatePass3","checkPass","validatePass4","validatePass5","validatePass6","validatePass7","options","label","uname","password","checkgender","checkusername","confirmPass","checkage","rules","required","validator","message","trigger","methods","submitEmail","post","email","then","res","submitForm","verificationCode","age","gender","username","status","$message","type","$router","push","resetForm","formName","$refs","resetFields","goBack","go","components"],"sourceRoot":"","sources":["D:\\comp30022 frontend\\comp30022-movie-review-website\\moviehub_frontend\\src\\views\\RegisterPage.vue"],"sourcesContent":["<template>\r\n  <div id= 'building'>\r\n      <HubIcon></HubIcon>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <h2 class=\"color\">Register</h2>\r\n      <el-form\r\n        :model=\"ruleForm\"\r\n        status-icon\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-position=\"left\"\r\n        label-width=\"150px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item class= \"color1\" label=\"Email\" prop=\"uname\">\r\n          <el-input v-model=\"ruleForm.uname\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"Username\" prop=\"checkusername\">\r\n      <el-input class = \"inputform\" v-model=\"ruleForm.checkusername\" maxlength=16 placeholder=\"Jack\" />\r\n    </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"Gender\" prop=\"checkgender\">\r\n      <el-select v-model=\"ruleForm.checkgender\" class=\"m-2\" placeholder=\"Select\" size=\"large\">\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\"\r\n      />\r\n      </el-select>\r\n    \r\n    </el-form-item>\r\n    <el-form-item class = \"color1\" label=\"Age\" prop=\"checkage\">\r\n      <el-input-number v-model=\"ruleForm.checkage\" :min=\"1\" :max=\"120\" @change=\"handleChange\" />\r\n    </el-form-item>\r\n        <el-form-item class= \"color1\" label=\"Password\" prop=\"pass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"ruleForm.pass\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item class = \"color1\" label=\"confirm password\" prop=\"confirmPass\">\r\n        <el-input  class = \"inputform\" v-model=\"ruleForm.confirmPass\" type=\"Password\" autocomplete=\"off\"/>\r\n      </el-form-item>\r\n        <el-form-item class= \"color1\" label=\"Verification code\" prop=\"password\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"ruleForm.password\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btnGroup\">\r\n        <el-button type=\"primary\" @click=\"submitForm()\"\r\n          >submit</el-button\r\n        >\r\n        <el-button @click=\"resetForm('ruleForm')\">reset</el-button>\r\n        <el-button @click=\"goBack\">back</el-button>\r\n        <el-button @click=\"submitEmail()\">Get verification code</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HubIcon from '@/components/HubIcon.vue';\r\nimport request from \"@/utils/RequestFile.js\"\r\nexport default {\r\n  data() {\r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n        callback(new Error('Please input the password'))\r\n      } else {\r\n        if (value!='' && ((this.ruleForm.pass.length < 8 || this.ruleForm.pass.length > 16))){\r\n          console.log(\"incorrect password form!!\")\r\n          callback(new Error('Please input correct form of password'))\r\n        }\r\n        \r\n    }\r\n      };\r\n      var validatePass1 = (rule, value, callback) => {\r\n         var reg = /^([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\\.[A-Z|a-z]{2,})+$/;\r\n          if (!value) {\r\n            return callback(new Error('cannot input empty email!'))\r\n          } else if (!reg.test(value)) {\r\n            return callback(new Error('please input valid email!'))\r\n          } else {\r\n            callback()\r\n          }\r\n  \r\n      };\r\n      var validatePass3 = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('Please input the password again'))\r\n      } else if (value !== this.ruleForm.checkPass) {\r\n        callback(new Error(\"Two inputs don't match!\"))\r\n      } else {\r\n        callback()\r\n      }\r\n      };\r\n      var validatePass4 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('Please input the username'))\r\n        } else {\r\n          callback()\r\n        }\r\n      };\r\n\r\n      var validatePass5 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('Please input the age'))\r\n        } else {\r\n          callback()\r\n        }\r\n      };\r\n      var validatePass6 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('Please choose the gender'))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      var validatePass7 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('Please input the verification code'))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      return {\r\n        options: [\r\n          {\r\n          value: 'Male',\r\n          label: 'Male',\r\n        },\r\n        {\r\n          value: 'Female',\r\n          label: 'Female',\r\n        },\r\n    \r\n        ],\r\n          \r\n          ruleForm: {\r\n              uname: \"\",\r\n              pass: \"\",\r\n              password: \"\",\r\n              checkgender: \"\",\r\n              checkusername: \"\",\r\n              confirmPass: \"\",\r\n              checkage: \"\"\r\n          },\r\n          rules: {\r\n              uname: [\r\n                  { required: true, validator: validatePass1, message: \"用户名不能为空！\", trigger: \"blur\" },\r\n              ],\r\n              pass: [{ required: true, validator: validatePass, trigger: \"blur\" }],\r\n              confirmPass : [{required: true, validator: validatePass3, trigger: \"blur\"}],\r\n              checkusername : [{required: true, validator: validatePass4, trigger: \"blur\"}],\r\n              checkage : [{required: true, validator: validatePass5, trigger: \"blur\"}],\r\n              checkgender: [{required: true, validator: validatePass6, trigger: \"blur\"}],\r\n              password: [{required: true, validator: validatePass7, trigger: \"blur\"}],\r\n             \r\n          },\r\n      };\r\n  },\r\n  methods: {\r\n      submitEmail() {\r\n    // 验证表单中的账号密码是否有效，因为在上面rules中定义为了必填 required: true\r\n     \r\n          console.log('submit!')\r\n          request.post(\"/user/email\", {email: this.ruleForm.uname}).then(res => {\r\n          \r\n          console.log(\"success\");\r\n        \r\n      })\r\n \r\n  },\r\n      submitForm() {\r\n          console.log(\"register!\");\r\n          request.post(\"/user/register\", {email: this.ruleForm.uname, password: this.ruleForm.pass, \r\n            verificationCode: this.ruleForm.password, age: this.ruleForm.checkage, gender: this.ruleForm.checkgender,\r\n             username: this.ruleForm.checkusername}).then(res => {\r\n              if(res.status === 200){\r\n                this.$message({\r\n                type: \"success\",\r\n                message: \"successfully registered\"\r\n                })\r\n                  this.$router.push('/moviehub/loginpage');\r\n              }else {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: res.message\r\n              })\r\n            }\r\n          })\r\n      },\r\n      resetForm(formName) {\r\n          this.$refs[formName].resetFields();\r\n      },\r\n      goBack() {\r\n          this.$router.go(-1);\r\n      },\r\n  },\r\n  components: { HubIcon }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.box-card {\r\n  margin: auto auto;\r\n  width: 600px;\r\n}\r\n.login-from {\r\n  margin: auto auto;\r\n}\r\n#building{\r\nbackground:url('https://wallpapercave.com/dwp2x/wp11089675.jpg');\r\nwidth:100%;\r\nheight:100%;\r\nposition:fixed;\r\nbackground-size:100% 100%;\r\n}\r\n.color {\r\n  color: orange;\r\n}\r\n.color1 .el-form-item__label{\r\n  color : orange;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}